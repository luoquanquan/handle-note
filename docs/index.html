<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("http://note.niubishanshan.top").hostname,root:"/",scheme:"Gemini",version:"7.7.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.json",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="技术学习, 读书笔记, 生活感悟~"><meta property="og:type" content="website"><meta property="og:title" content="圈圈的随手笔记"><meta property="og:url" content="http://note.niubishanshan.top/index.html"><meta property="og:site_name" content="圈圈的随手笔记"><meta property="og:description" content="技术学习, 读书笔记, 生活感悟~"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="圈圈的圈"><meta property="article:tag" content="前端"><meta property="article:tag" content=" JavaScript"><meta property="article:tag" content=" Node"><meta property="article:tag" content=" 全栈"><meta property="article:tag" content=" 读书"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://note.niubishanshan.top/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1}</script><title>圈圈的随手笔记</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="圈圈的随手笔记" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div> <a href="https://github.com/luoquanquan" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">圈圈的随手笔记</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">路漫漫其修远兮, 吾将上下而求索</p></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/interview/interview-4/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/interview/interview-4/" class="post-title-link" itemprop="url">interview-4</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-07 21:50:31" itemprop="dateCreated datePublished" datetime="2020-03-07T21:50:31+08:00">2020-03-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-03-08 00:18:48" itemprop="dateModified" datetime="2020-03-08T00:18:48+08:00">2020-03-08</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.5k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="推断以下代码执行的结果"><a href="#推断以下代码执行的结果" class="headerlink" title="推断以下代码执行的结果"></a>推断以下代码执行的结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!foo) &#123;</span><br><span class="line">        <span class="keyword">var</span> foo = <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(foo)</span><br><span class="line">&#125;</span><br><span class="line">bar()</span><br></pre></td></tr></table></figure><p>以上代码执行的步骤为</p><ul><li>变量提升</li><li>代码自上而下执行</li><li>函数调用<ul><li>形参赋值</li><li>变量提升, var foo; 提升到函数作用域的顶端</li><li>代码自上而下执行<br>由于代码执行到 if 判断时 foo 已经被声明默认值为 undefined 所以 !foo =&gt; true 最终打印的结果就是 10</li></ul></li></ul><h2 id="推断以下代码执行的结果-1"><a href="#推断以下代码执行的结果-1" class="headerlink" title="推断以下代码执行的结果"></a>推断以下代码执行的结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> n = <span class="number">10</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        n++</span><br><span class="line">        <span class="built_in">console</span>.log(n)</span><br><span class="line">    &#125;</span><br><span class="line">    b()</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = a()</span><br><span class="line">c()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(n)</span><br></pre></td></tr></table></figure><p>以上代码执行的步骤为</p><ul><li>变量提升</li><li>var n; var c; function a; a = AAAFFF111(内存地址)</li><li>代码由上向下执行</li><li>n = 0</li><li>c = a() 创建私有作用域<ul><li>形参赋值 - 无</li><li>私有作用域变量提升</li><li>var n; function b; b = BBBFFF111; n = 10;</li><li>b() 创建私有作用<ul><li>形参赋值 - 无</li><li>私有作用域变量提升 - 无</li><li>代码由上向下执行</li><li>私有变量没有 n 变量 -&gt; 查找父级作用域 n = 10 n++ =&gt; n = 11</li><li>console.log(n) =&gt; 11</li></ul></li><li>返回 b = BBBFFF111 引用赋值给 c 堆内存不得销毁</li></ul></li><li>c() =&gt; b() =&gt; BBBFFF111() 创建私有作用<ul><li>形参赋值 - 无</li><li>私有作用域变量提升 - 无</li><li>代码由上向下执行</li><li>私有变量没有 n 变量 -&gt; 查找父级作用域 n = 11 n++ =&gt; n = 12</li><li>console.log(n) =&gt; 12</li></ul></li><li>console.log(n) =&gt; 0</li></ul><p>经过以上的分析, 本例最终打印的结果为 11, 12, 0</p><h2 id="推断以下代码执行的结果-2"><a href="#推断以下代码执行的结果-2" class="headerlink" title="推断以下代码执行的结果"></a>推断以下代码执行的结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>, b = <span class="number">11</span>, c = <span class="number">12</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">2</span></span><br><span class="line">    c = <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="built_in">console</span>.log(b)</span><br><span class="line"><span class="built_in">console</span>.log(c)</span><br></pre></td></tr></table></figure><p>以上代码执行的步骤为</p><ul><li>变量提升 var a, b, c; text = AAAFFF111; a = 10; b = 11; c = 12</li><li>代码自上而下执行</li><li>test(10) 创建私有作用域<ul><li>形参赋值 a = 10</li><li>变量提升 var b</li><li>代码自上而下执行</li><li>a = 1</li><li>b = 2</li><li>c = 3 =&gt; 私有作用域中没有定义 c, 从全局作用域中找到 c 并赋值</li></ul></li><li>console.log(a) =&gt; 10</li><li>console.log(b) =&gt; 11</li><li>console.log(c) =&gt; 3<br>最终执行的结果为 10, 11, 3</li></ul><h2 id="推断以下代码执行的结果-3"><a href="#推断以下代码执行的结果-3" class="headerlink" title="推断以下代码执行的结果"></a>推断以下代码执行的结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!(<span class="string">'a'</span> <span class="keyword">in</span> <span class="built_in">window</span>)) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 输出 undefined</span></span><br></pre></td></tr></table></figure><p>以上代码考核的点有两个:</p><ul><li>变量提升, 不管条件是否满足都会提升</li><li>非严格模式下, 在全局作用域创建的变量(使用 var)将会作为 window 的属性</li></ul><h2 id="推断以下代码执行的结果-4"><a href="#推断以下代码执行的结果-4" class="headerlink" title="推断以下代码执行的结果"></a>推断以下代码执行的结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 形参赋值 a = 10</span></span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">    a = <span class="number">1000</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="number">10</span>)</span><br></pre></td></tr></table></figure><p>以上代码考核的点为:<br>在非严格模式下, 函数的实参集合与形参变量存在 “映射” 关系, 不管其中一方谁改变了, 另外一个都会跟着改变.<br>严格模式下, 两者之间的映射关系会被切断, 相互之间不会影响</p><p>所以以上代码执行的结果为 10, 10, 100, 1000</p><h2 id="推断以下代码执行的结果-5"><a href="#推断以下代码执行的结果-5" class="headerlink" title="推断以下代码执行的结果"></a>推断以下代码执行的结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">4</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params">x, y, a</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 私有作用域 x = 1; y = 2, a = 3</span></span><br><span class="line">    <span class="built_in">console</span>.log(a) <span class="comment">// 3</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">2</span>] = <span class="number">10</span> <span class="comment">// 映射关系</span></span><br><span class="line">    <span class="built_in">console</span>.log(a) <span class="comment">// 10</span></span><br><span class="line">&#125;</span><br><span class="line">a = b(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// =&gt; undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br></pre></td></tr></table></figure><p>以上代码考察的点为, 函数没有显式的返回值时默认的返回值是 undefined</p><p>所以执行的结果为 3, 10, undefined</p><h2 id="amp-amp-vs"><a href="#amp-amp-vs" class="headerlink" title="&amp;&amp; vs ||"></a>&amp;&amp; vs ||</h2><ul><li>在条件判断中<ul><li>&amp;&amp;: 一假必假</li><li>||: 一真必真</li></ul></li><li>在赋值操作中<ul><li>A || B =&gt; 如果 A 为真返回 A 的值, 否则返回 B 的值(无论真假)<ul><li>1 || 2 =&gt; 1</li><li>0 || false =&gt; false</li></ul></li><li>A &amp;&amp; B =&gt; 如果 A 为假返回 A 的值, 否则返回 B 的值<ul><li>1 &amp;&amp; 2 =&gt; 2</li><li>0 &amp;&amp; false =&gt; 0</li></ul></li></ul></li><li>逻辑 &amp;&amp; 的优先级高于 ||<ul><li>0 || 2 &amp;&amp; false || 3 =&gt; 3<ul><li>由于 &amp;&amp; 优先级高, 所以先执行了 2 &amp;&amp; false =&gt; false</li><li>0 || false || 3</li><li>从左向右执行 0 || false =&gt; false</li><li>false || 3 =&gt; 3</li></ul></li></ul></li></ul><h2 id="推断以下代码执行的结果-6"><a href="#推断以下代码执行的结果-6" class="headerlink" title="推断以下代码执行的结果"></a>推断以下代码执行的结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="string">'hello'</span></span><br><span class="line">~(<span class="function"><span class="keyword">function</span>(<span class="params">foo</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(foo)</span><br><span class="line">    <span class="keyword">var</span> foo = foo || <span class="string">'world'</span></span><br><span class="line">    <span class="built_in">console</span>.log(foo)</span><br><span class="line">&#125;)(foo)</span><br><span class="line"><span class="built_in">console</span>.log(foo)</span><br></pre></td></tr></table></figure><p>以上代码结果为 hello, hello, hello</p><h2 id="推断以下代码执行的结果-7"><a href="#推断以下代码执行的结果-7" class="headerlink" title="推断以下代码执行的结果"></a>推断以下代码执行的结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">9</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> b + a++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fn() <span class="comment">// a = 0 f = function(b)...</span></span><br><span class="line"><span class="built_in">console</span>.log(f(<span class="number">5</span>)) <span class="comment">// a = 1 打印 5</span></span><br><span class="line"><span class="built_in">console</span>.log(fn()(<span class="number">5</span>)) <span class="comment">// a = 1 打印 5</span></span><br><span class="line"><span class="built_in">console</span>.log(f(<span class="number">5</span>)) <span class="comment">// a = 2 打印 6</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>以上代码执行逻辑如下:<br><img src="/note-images/2020-03-08-00-09-06.png" alt="2020-03-08-00-09-06"></p><p>综上, 打印的结果为 5, 5, 6, 2</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener">运算符优先级</a></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/HTTP/HTTP%20%E5%AE%9E%E8%B7%B5/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/HTTP/HTTP%20%E5%AE%9E%E8%B7%B5/" class="post-title-link" itemprop="url">HTTP 实践</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-05 11:50:31 / 修改时间：16:30:31" itemprop="dateCreated datePublished" datetime="2020-03-05T11:50:31+08:00">2020-03-05</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>3.5k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure><p>安装成功后 <code>nginx</code> 的位置在 <code>/usr/local/etc/nginx</code> 目录下.</p><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure><p>运行 <code>nginx</code> 命令没有报错说明安装启动成功, 验证方式为浏览器直接访问 <a href="http://localhost" target="_blank" rel="noopener">localhost</a> 查看是否成功展示 <code>nginx</code> 欢迎页面</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><blockquote><p>正式线上配置的 nginx 需要配置 DNS 来把域名指向我们的服务器 IP. 由于本地开发, 直接修改 hosts 即可</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">12.0.0.1 quanquan.com</span><br></pre></td></tr></table></figure><p>PS: 每次修改配置文件以后都要执行 <code>nginx -s reload</code> 重启 <code>nginx</code></p><h3 id="导入额外配置文件"><a href="#导入额外配置文件" class="headerlink" title="导入额外配置文件"></a>导入额外配置文件</h3><p>安装 <code>nginx</code> 成功后, 其配置文件的默认配置文件为 <code>/usr/local/etc/nginx/nginx.conf</code> 文件,<br>打开配置文件, 取消 <code>include servers/*;</code> 这一行前边的注释, 就可以随意在 <code>servers</code> 目录下创建配置文件了. 本次笔记中只创建 <code>test.conf</code> 配置文件</p><h3 id="配置一个简单的代理服务器"><a href="#配置一个简单的代理服务器" class="headerlink" title="配置一个简单的代理服务器"></a>配置一个简单的代理服务器</h3><p>编写 nginx 配置文件如下</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> quanquan.com;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:3333;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建一个 <code>server</code> 文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(request.headers);</span><br><span class="line">    response.end(<span class="string">'&lt;h1&gt;Hello world&lt;h1&gt;'</span>)</span><br><span class="line">&#125;).listen(<span class="number">3333</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'the server is running~'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>服务文件中, 对于所有的请求直接返回了 <code>&lt;h1&gt;Hello world&lt;h1&gt;</code>, 并且打印了请求的头信息, 可以看到以上的代理服务虽然能够成功代理到业务服务但是打印的 HOST 头信息, 变成了代理服务请求的 HOST: 127.0.0.1:3333</p><h3 id="修正-HOST-头信息"><a href="#修正-HOST-头信息" class="headerlink" title="修正 HOST 头信息"></a>修正 HOST 头信息</h3><p>把 location 块修改为以下内容即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">location &#x2F; &#123;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1:3333;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="配置代理缓存服务器"><a href="#配置代理缓存服务器" class="headerlink" title="配置代理缓存服务器"></a>配置代理缓存服务器</h3><p>第一步, 指定缓存信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_cache_path &#x2F;Users&#x2F;quanquanluo&#x2F;nginx_cache levels&#x3D;1:2 keys_zone&#x3D;cache:10m max_size&#x3D;10g inactive&#x3D;60m use_temp_path&#x3D;off;</span><br></pre></td></tr></table></figure><p>在此步骤中我们指定了, nginx 缓存的目录重启 nginx 之后会在指定的缓存目录创建一个</p><p>第二步, 把 location 块修改为以下内容即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">location &#x2F; &#123;</span><br><span class="line">    proxy_cache my_cache;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1:3333;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>第三步, 升级 <code>server.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(), <span class="number">2e3</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> img = fs.readFileSync(<span class="string">'./test.jpg'</span>)</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="keyword">async</span> (request, response) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;url&#125; = request</span><br><span class="line">    <span class="built_in">console</span>.log(url);</span><br><span class="line">    <span class="keyword">if</span> (url === <span class="string">'/'</span>) &#123;</span><br><span class="line">        response.end(<span class="string">'&lt;h1&gt;Hello world&lt;h1&gt;&lt;img src="/test.jpg" /&gt;'</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (url === <span class="string">'/test.jpg'</span>) &#123;</span><br><span class="line">        <span class="keyword">await</span> sleep()</span><br><span class="line">        response.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">            <span class="string">'Content-Type'</span>: <span class="string">'image/jpeg'</span>,</span><br><span class="line">            <span class="string">'Cache-Control'</span>: <span class="string">'max-age=5, s-maxage=10'</span></span><br><span class="line">        &#125;)</span><br><span class="line">        response.end(img)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    response.end()</span><br><span class="line">&#125;).listen(<span class="number">3333</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'the server is running~'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>第四步, 通过 Vary 字段可以指定只有某个请求头一致的时候才能使用缓存</p><p>示例,</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'image/jpeg'</span>,</span><br><span class="line">    <span class="string">'Cache-Control'</span>: <span class="string">'max-age=5, s-maxage=10'</span>,</span><br><span class="line">    Vary: <span class="string">'User-Agent'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>以上配置指定了只有请求头 <code>User-Agent</code> 一致的时候才能使用缓存. 这个的使用场景就是为相同的终端提供一致的缓存信息</p><h3 id="在本地配置-https-服务"><a href="#在本地配置-https-服务" class="headerlink" title="在本地配置 https 服务"></a>在本地配置 https 服务</h3><p>第一步, 生成证书.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -x509 -newkey rsa:2048 -nodes -sha256 -keyout localhost-privkey.pem -out localhost-cert.pem</span><br></pre></td></tr></table></figure><p>执行该步骤后, 会在当前目录创建 <code>localhost-privkey.pem</code> <code>localhost-cert.pem</code> 两个文件</p><p>第二步, 修改配置爱文件中的 server 块</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> quanquan.com;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span>    path to /localhost-privkey.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate</span>        path to /localhost-cert.pem;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新版的 chrome 中, 自建的证书, 没有了不安全页面的继续访问入口. 所以有了下一步</p><p>第三步, 安装并信任刚刚创建的证书</p><ul><li>在 finder 中找到生成的 localhost-cert.pem 文件并双击</li><li>在钥匙串登录类别中找到创建证书时候输入的证书名字, 我写的是 CN</li><li>双击刚刚安装的证书弹出以下图片, 按照图示设置</li></ul><p><img src="/note-images/2020-03-05-15-58-30.png" alt="2020-03-05-15-58-30"></p><p>至此, 再通过 https 访问 <code>quanquan.com</code> 弹出的不安全页面就可以通过高级, 选择仍要前往了. 本地配置 https 环境完成</p><h3 id="访问-http-自动跳转到-https"><a href="#访问-http-自动跳转到-https" class="headerlink" title="访问 http 自动跳转到 https"></a>访问 http 自动跳转到 https</h3><p>在配置文件中添加以下配置即可</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span> <span class="number">80</span> default_server;</span><br><span class="line">  <span class="attribute">listen</span> [::]:<span class="number">80</span> default_server;</span><br><span class="line">  <span class="attribute">server_name</span> quanquan.com;</span><br><span class="line">  <span class="attribute">return</span> <span class="number">302</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="升级-http2"><a href="#升级-http2" class="headerlink" title="升级 http2"></a>升级 http2</h3><p>就这么一句</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">listen</span> <span class="number">443</span> http2 ssl;</span><br></pre></td></tr></table></figure><h3 id="开启-http2-Server-Push"><a href="#开启-http2-Server-Push" class="headerlink" title="开启 http2 Server-Push"></a>开启 http2 Server-Push</h3><p>第一步, nginx 配置文件 <code>server</code> 块中添加 <code>http2_push_preload on;</code><br>第二步, 升级服务代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">if</span> (url === <span class="string">'/'</span>) &#123;</span><br><span class="line">    response.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">        <span class="string">'Link'</span>: <span class="string">'&lt;/test.jpg&gt;; rel=preload; as=image'</span></span><br><span class="line">    &#125;)</span><br><span class="line">    response.end(<span class="string">'&lt;h1&gt;Hello world&lt;h1&gt;&lt;img src="/test.jpg" /&gt;'</span>)</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>以上代码的意思是当浏览器访问 <code>/</code> 路径时, 主动向浏览器推送 test.jpg</p><p>由于, 自签名的证书构建的 https 会被浏览器标记为不安全的服务, 所以浏览器上看不到效果…</p><p>但是这个语法是没有问题的~</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="http://www.ruanyifeng.com/blog/2018/03/http2_server_push.html" target="_blank" rel="noopener">HTTP/2 服务器推送（Server Push）教程</a><br><a href="https://www.cnblogs.com/wujiaolong/p/5172e1f7e9924644172b64cb2c41fc58.html" target="_blank" rel="noopener">HTTP、HTTP2.0、SPDY、HTTPS 你应该知道的一些事</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/HTTP/HTTP%20%E5%9F%BA%E7%A1%80/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/HTTP/HTTP%20%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">HTTP 基础</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-04 18:50:31" itemprop="dateCreated datePublished" datetime="2020-03-04T18:50:31+08:00">2020-03-04</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-03-05 16:18:02" itemprop="dateModified" datetime="2020-03-05T16:18:02+08:00">2020-03-05</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.2k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/note-images/2020-03-04-20-55-42.png" alt="2020-03-04-20-55-42"></p><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>HTTP (HyperText Transfer Protocol): 超文本传输协议, 它是建立在 TCP/IP 协议之上的应用层规范. 是互联网上应用最广泛的一种网络协议.</p><h2 id="HTTP-5-层网络模型"><a href="#HTTP-5-层网络模型" class="headerlink" title="HTTP 5 层网络模型"></a>HTTP 5 层网络模型</h2><p><img src="/note-images/2020-03-04-20-46-44.png" alt="2020-03-04-20-46-44"></p><p>各个层级概述</p><ul><li>物理层, 主要作用是定义物理设备如何连接和传输数据</li><li>数据链路层, 在通信实体间建立数据链路链接</li><li>网络层, 为数据在节点之间传输创建逻辑链路</li><li>传输层, 用于向用户提供端到端(end to end)的服务. 传输层向上层屏蔽了下层数据通信的细节. 例如, 包体过大时的分包问题.</li><li>应用层, 为软件提供服务, 构建与 TCP 协议之上, 向应用软件屏蔽了网络传输相关的细节</li></ul><h2 id="HTTP-的发展历史"><a href="#HTTP-的发展历史" class="headerlink" title="HTTP 的发展历史"></a>HTTP 的发展历史</h2><p><img src="/note-images/2020-03-04-20-58-06.png" alt="2020-03-04-20-58-06"></p><h3 id="HTTP-0-9"><a href="#HTTP-0-9" class="headerlink" title="HTTP / 0.9"></a>HTTP / 0.9</h3><p>发布于 1991 年, 该版本极其简单.</p><ul><li>只有一个命令 GET</li><li>没有 HEADER 等描述数据的信息</li><li>服务端内容发送完成之后就关闭 TCP 链接</li></ul><h3 id="HTTP-1-0"><a href="#HTTP-1-0" class="headerlink" title="HTTP / 1.0"></a>HTTP / 1.0</h3><ul><li>任何格式的内容都可以发送, 使得互联网不仅能传递文字还能传输图片 / 视频 / 二进制文件, 为互联网的大发展奠定了基础</li><li>增加了 POST / PUT / HEADER 等命令</li><li>增加了 status code 和 header 相关内容.</li><li>增加了多字符集的支持, 多部分发送(multi-part), 权限(authorization), 缓存(cache), 内容编码(content encoding)等</li></ul><p>HTTP / 1.0 的缺点, 就是每个 TCP 链接只能发送一个请求. 数据发送完毕就会断开 TCP 链接, 如果需要请求其他资源就需要重新创建 TCP 链接</p><h3 id="HTTP-1-1"><a href="#HTTP-1-1" class="headerlink" title="HTTP / 1.1"></a>HTTP / 1.1</h3><ul><li>持久链接, 设置 TCP 链接在数据发送完成后默认不关闭, 可以被后续的请求复用. 解决了 1.0 版本中的问题. 客户端或者服务端发现对方一段时间没有活动就可以主动关闭链接. 规范的做法是, 客户端在最后一个请求时发送<code>Connection: close</code> 明确通知服务器关闭 TCP 链接</li><li>增加了管道机制, 可以在一个 TCP 链接里发送多个 http 请求, 但是在 1.1 版本中虽然可以在同一个 TCP 链接里发送多个 http 请求, 但是服务器对于进来的请求时按照顺序进行数据返回的. 如果前一个请求等待时间非常长, 而后一个请求处理得比较快. 这个时候后一个请求不能先发送, 而是要等第一个请求数据全部发送完成之后, 才能进行发送. 即是串行的.</li><li>增加了 HOST 头, 有了 HOST 之后就可以在一台服务器(物理机)上同时跑多个 web 服务, 提升了物理机的利用率</li></ul><h3 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP / 2"></a>HTTP / 2</h3><ul><li>所有数据都以二进制传输, 在 HTTP/1.1 里面大部分的数据传输是通过字符串, 所以数据的分片方式是不太一样的. 在 HTTP/2 里面所有的数据都是以帧进行传输的</li><li>同一个连接里面发送多个请求时, 服务器端不再需要按照顺序来返回处理后的数据. 而是可以在返回第一个请求里面数据的时候, 同时返回第二个请求里面的数据. 这样的并行传输能够更大限度地提高 web 应用的传输效率</li><li>新增头信息压缩, 有效减少带宽使用</li><li>新增推送等功能, HTTP/2之前, 只能由客户端发送数据, 服务器端返回数据. 客户端是主动方, 服务器端永远是被动方. 在 HTTP/2 里面有了 “推送” 的概念, 也就是说服务器端可以主动向客户端发起一些数据传输</li><li>HTTP/2 其实主要就是改善了 HTTP/1.1 里面造成性能低下的一些问题</li></ul><p>推送功能实例, 一个web页面加载时会要求一些html, css, js等文件, css和js文件是以链接的形式在 html 文本里面显示的, 只有通过浏览器解析了 html 里面的内容之后, 才能根据链接里面包含的URL地址去请求对应的 css 和 js 文件.<br>在HTTP/2之前, 这个传输过程会包含顺序问题, 需要先请求到 html 的文件, 通过浏览器运行解析这个 html 文件之后, 才能去发送 css 的请求和 js 的请求.<br>HTTP/2 中有了推送功能之后, 在请求 html 的同时, 服务器端可以主动把 html 里面所引用到的 css 和 js 文件推送到客户端, 这样html, css 和 js 的发送就是并行的而不是串行的</p><h2 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h2><p><img src="/note-images/2020-03-04-21-47-22.png" alt="2020-03-04-21-47-22"></p><h2 id="cache-control"><a href="#cache-control" class="headerlink" title="cache-control"></a>cache-control</h2><ul><li>public, 请求发送过程中的任何一个环节(如, 代理服务器)都可以缓存请求的内容</li><li>private, 只有发起请求的浏览器能够缓存请求的内容</li><li>no-cache, 可以存储请求的内容, 但是缓存的内容是否可用需要向服务器发请求查询. no-cache的响应实际是可以存储在本地缓存中的, 只是在与原始服务器进行新鲜度再验证之前, 缓存不能将其提供给客户端使用</li><li>no-store, 禁用缓存, 禁止本地和代理服务器缓存请求的文件</li><li>max-age =<second> 缓存到期时间</second></li><li>s-maxage =<second> 代理服务器上缓存的内容过期时间</second></li><li>max-stale =<second> 即使缓存已经过了有效期, 但是仍然可以使用缓存(浏览器中用不到)</second></li><li>must-revalidate, 缓存必须在使用之前验证旧资源的状态, 并且不可使用过期资源. 表示如果页面过期, 则去服务器进行获取</li><li>proxy-revalidate, 与must-revalidate作用相同, 但它仅适用于共享缓存(例如代理), 并被私有缓存忽略</li><li>no-transform, 静止代理服务器修改请求信息</li></ul><h2 id="其他内容"><a href="#其他内容" class="headerlink" title="其他内容"></a>其他内容</h2><ul><li>数据协商 Accept / Content-Type 这些</li><li>Redirect (301 from disk cache, 302, 307 / POST)</li><li>CSP(content security policy)</li></ul><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://www.cnblogs.com/kevingrace/p/10459429.html" target="_blank" rel="noopener">Nginx下关于缓存控制字段cache-control的配置说明</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control" target="_blank" rel="noopener">Cache-Control</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/interview/interview-3/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/interview/interview-3/" class="post-title-link" itemprop="url">interview-3</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-02 21:50:31" itemprop="dateCreated datePublished" datetime="2020-03-02T21:50:31+08:00">2020-03-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-03-07 22:58:17" itemprop="dateModified" datetime="2020-03-07T22:58:17+08:00">2020-03-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>1.6k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="关于DOMContentLoaded和load事件说法正确的是"><a href="#关于DOMContentLoaded和load事件说法正确的是" class="headerlink" title="关于DOMContentLoaded和load事件说法正确的是"></a>关于DOMContentLoaded和load事件说法正确的是</h2><p>DOMContentLoaded事件比load事件更早执行</p><p>当纯HTML被完全加载以及解析时, DOMContentLoaded 事件会被触发, 而不必等待样式表, 图片或者子框架完成加载</p><p>load 事件仅仅应该在探测到整个页面完全加载完成时被使用. 一个常见的错误就是在该使用 DOMContentLoaded 的地方使用了load</p><h2 id="innerHTML-vs-innerText-vs-outerHTML-vs-outerText"><a href="#innerHTML-vs-innerText-vs-outerHTML-vs-outerText" class="headerlink" title="innerHTML vs innerText vs outerHTML vs outerText"></a>innerHTML vs innerText vs outerHTML vs outerText</h2><ul><li>innerHTML 设置或者获取标签所包含的 HTML 与文本信息, 不含标签本身</li><li>innerText 设置或者获取标签所包含的文本信息, 不含标签本身</li><li>outerHTML 设置或获取标签本身以及所包含的 HTML 与文本信息, 包含本身</li><li>outerText 设置或获取标签本身以及所包含的文本信息, 包含本身</li></ul><p>示例:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>this is text<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> div = <span class="built_in">document</span>.querySelector(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'div.innerHTML'</span>, div.innerHTML);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'div.innerText'</span>, div.innerText);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'div.outerHTML'</span>, div.outerHTML);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'div.outerText'</span>, div.outerText);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 控制台打印的结果为</span></span><br><span class="line"><span class="comment">div.innerHTML &lt;p&gt;this is text&lt;/p&gt;</span></span><br><span class="line"><span class="comment">index.html:5 div.innerText this is text</span></span><br><span class="line"><span class="comment">index.html:6 div.outerHTML &lt;div id="div1"&gt;&lt;p&gt;this is text&lt;/p&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">index.html:7 div.outerText this is text</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="块级元素-vs-行内元素"><a href="#块级元素-vs-行内元素" class="headerlink" title="块级元素 vs 行内元素"></a>块级元素 vs 行内元素</h2><h3 id="HTML-将标签分为容器级和文本级"><a href="#HTML-将标签分为容器级和文本级" class="headerlink" title="HTML 将标签分为容器级和文本级"></a>HTML 将标签分为容器级和文本级</h3><h4 id="容器级"><a href="#容器级" class="headerlink" title="容器级"></a>容器级</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div  h  li dl dd dt ul li</span><br></pre></td></tr></table></figure><h4 id="文本级"><a href="#文本级" class="headerlink" title="文本级"></a>文本级</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p b a span em i u</span><br></pre></td></tr></table></figure><h3 id="CSS-将标签分为块级元素和行内元素"><a href="#CSS-将标签分为块级元素和行内元素" class="headerlink" title="CSS 将标签分为块级元素和行内元素"></a>CSS 将标签分为块级元素和行内元素</h3><h4 id="块级元素"><a href="#块级元素" class="headerlink" title="块级元素"></a>块级元素</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div h li p dd dt</span><br></pre></td></tr></table></figure><h4 id="行内元素"><a href="#行内元素" class="headerlink" title="行内元素"></a>行内元素</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a b span em u i</span><br></pre></td></tr></table></figure><h2 id="CSS-权重列表"><a href="#CSS-权重列表" class="headerlink" title="CSS 权重列表"></a>CSS 权重列表</h2><table><thead><tr><th>权重</th><th>选择器</th></tr></thead><tbody><tr><td>10000</td><td>!important</td></tr><tr><td>1000</td><td>内联样式</td></tr><tr><td>100</td><td>id 选择器</td></tr><tr><td>10</td><td>类 / 伪类 / 属性选择器</td></tr><tr><td>1</td><td>标签 / 伪元素选择器</td></tr><tr><td>0</td><td>通用选择器 * / 子选择器 &gt; / 相邻选择器 + / 同胞选择器 ~</td></tr></tbody></table><h2 id="伪元素和伪类"><a href="#伪元素和伪类" class="headerlink" title="伪元素和伪类"></a>伪元素和伪类</h2><p>总结了一篇文章在<a href="https://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/CSS/%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0/">这里</a></p><h2 id="1-gt-gt-gt-32-的值为"><a href="#1-gt-gt-gt-32-的值为" class="headerlink" title="-1 &gt;&gt;&gt; 32 的值为"></a>-1 &gt;&gt;&gt; 32 的值为</h2><h3 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h3><p><code>&gt;&gt;</code> 这个是带符号右移<br><code>&gt;&gt;&gt;</code> 这个是无符号右移</p><blockquote><p>按二进制形式把所有的数字向右移动对应位数, 低位移出(舍弃), 高位的空位补零. 对于正数来说和带符号右移()&gt;&gt;)相同, 但是对于负数来说不同</p></blockquote><h4 id="正数"><a href="#正数" class="headerlink" title="正数"></a>正数</h4><p>例: 20 &gt;&gt; 2</p><ul><li>首先, 把原数转化成二进制. 20 的二进制为: 0001 0100</li><li>其次, 将二进制数向右移动两位, 高伟补符号位(0). 得到 0000 0101</li><li>最后, 将二进制转化为十进制数, 0000 0101 转化为十进制为 5 (parseInt(‘00000101’, 2) =&gt; 5)</li><li>所以, 20 &gt;&gt; 2 = 5</li></ul><h4 id="负数"><a href="#负数" class="headerlink" title="负数"></a>负数</h4><p>例: -20 &gt;&gt; 2</p><ul><li>首先, 把原数转化成二进制<ul><li>取反加1 (负数转二进制步骤)</li><li>20 的二进制为 0001 0100</li><li>取反得到 1110 1011</li><li>加1后得到 1110 1100</li></ul></li><li>其次, 将二进制向右移动两位. 高位补符号位 1, 得到 1111 1011</li><li>最后, 将二进制数转化为十进制数<ul><li>取反 -&gt; 0000 0100</li><li>加 1 -&gt; 0000 0101</li><li>因为是负数 -&gt; 1000 0101</li><li>2 的 2 次方加 2 的 0 次方 -&gt; -5</li></ul></li><li>所以, -20 &gt;&gt; 2 = -5</li></ul><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Unsigned_right_shift" target="_blank" rel="noopener">按位操作符</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/CSS/%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/CSS/%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0/" class="post-title-link" itemprop="url">伪类和伪元素</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-02 20:10:31 / 修改时间：23:10:15" itemprop="dateCreated datePublished" datetime="2020-03-02T20:10:31+08:00">2020-03-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>965</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>伪类和伪元素是为了格式化文档以外的信息, 也就是说, 伪类和伪元素是用来修饰不在文档树中的部分. 比如, 一句话中的第一个字母, 或者是列表中的第一个元素…</p></blockquote><h2 id="伪类"><a href="#伪类" class="headerlink" title="伪类"></a>伪类</h2><p>伪类用于当已有元素处于的某个状态时, 为其添加对应的样式, 这个状态是根据用户行为而动态变化的.</p><p><img src="/note-images/2020-03-02-22-34-04.png" alt="2020-03-02-22-34-04"></p><h2 id="伪元素"><a href="#伪元素" class="headerlink" title="伪元素"></a>伪元素</h2><p>伪元素用于创建一些不在文档树中的元素, 并为其添加样式</p><p><img src="/note-images/2020-03-02-22-34-56.png" alt="2020-03-02-22-34-56"></p><h2 id="伪类和伪元素的区别"><a href="#伪类和伪元素的区别" class="headerlink" title="伪类和伪元素的区别"></a>伪类和伪元素的区别</h2><h3 id="例一"><a href="#例一" class="headerlink" title="例一"></a>例一</h3><p>假设有这样的 html 片段</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果想要给第一项添加样式, 需要给第一项添加一个类, 并在该类中定义对应的样式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"first"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.first</span> &#123;</span></span><br><span class="line">        color: red;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其实还可以利用伪类选择器来选择第一个元素 <code>:first-child</code> 为其添加样式.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="例二"><a href="#例二" class="headerlink" title="例二"></a>例二</h3><p>假设有以下 HTML 代码段</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果想要给该段落的第一个字母添加样式, 可以添加一个标签包裹第一个元素, 例如:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>H<span class="tag">&lt;/<span class="name">span</span>&gt;</span>ello World!</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    span &#123;</span><br><span class="line">        color: red;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果不创建这个元素, 还可以使用 <code>:first-letter</code> 伪元素来为其添加样式. 这个时候, 看起来像是创建了一个虚拟的 <code>span</code> 元素并添加了样式, 但实际上文档树中并没有 <code>span</code> 这个元素</p><p>从上述例子中可以看出, 伪类的操作对象是文档树中已有的元素, 而伪元素则创建了一个文档树外的元素. 伪类与伪元素的区别在于: 有没有创建一个文档树之外的元素</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><a href="https://www.w3school.com.cn/css/css_pseudo_elements.asp" target="_blank" rel="noopener">CSS 伪元素</a></li><li><a href="https://www.w3school.com.cn/css/css_pseudo_classes.asp" target="_blank" rel="noopener">CSS 伪类 (Pseudo-classes)</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes" target="_blank" rel="noopener">伪类</a></li><li><a href="https://www.cnblogs.com/ihardcoder/p/5294927.html" target="_blank" rel="noopener">CSS3伪类和伪元素的特性和区别</a></li><li><a href="https://blog.csdn.net/weixin_42420703/article/details/84863556" target="_blank" rel="noopener">伪类和伪元素的区别</a></li><li><a href="https://zhuanlan.zhihu.com/p/46909886" target="_blank" rel="noopener">CSS中伪类与伪元素，你弄懂了吗？</a></li><li><a href="https://www.cnblogs.com/ammyben/p/8012747.html" target="_blank" rel="noopener">伪类与伪元素的区别</a></li><li><a href="http://www.javanx.cn/20180928/css-selector/" target="_blank" rel="noopener">CSS选择器如此之多，你了解多少？</a></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/basic-js/cookie/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/basic-js/cookie/" class="post-title-link" itemprop="url">Cookie</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-02 13:20:31 / 修改时间：15:42:33" itemprop="dateCreated datePublished" datetime="2020-03-02T13:20:31+08:00">2020-03-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.1k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="添加一条-cookie"><a href="#添加一条-cookie" class="headerlink" title="添加一条 cookie"></a>添加一条 cookie</h2><h3 id="简单粗暴的方法"><a href="#简单粗暴的方法" class="headerlink" title="简单粗暴的方法"></a>简单粗暴的方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie=<span class="string">"key=quanquan"</span></span><br></pre></td></tr></table></figure><h3 id="文艺一点的方法"><a href="#文艺一点的方法" class="headerlink" title="文艺一点的方法"></a>文艺一点的方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">key, value, expiresHours</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> cookie = key + <span class="string">"="</span> + value</span><br><span class="line">    <span class="comment">//判断是否设置过期时间, 0代表关闭浏览器时失效</span></span><br><span class="line">    <span class="keyword">if</span> (expiresHours &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + expiresHours * <span class="number">3600</span> * <span class="number">1000</span>)</span><br><span class="line">        cookie = cookie + <span class="string">"; expires="</span> + date.toGMTString()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.cookie = cookie</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="删除指定的-cookie"><a href="#删除指定的-cookie" class="headerlink" title="删除指定的 cookie"></a>删除指定的 cookie</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteCookie</span> (<span class="params">key</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() - <span class="number">1</span>) <span class="comment">// 过去的时间</span></span><br><span class="line">    <span class="built_in">document</span>.cookie = key + <span class="string">"=value; expires="</span> + date.toGMTString() <span class="comment">// 此时这条记录就已经是过期的啦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="更新指定的-cookie"><a href="#更新指定的-cookie" class="headerlink" title="更新指定的 cookie"></a>更新指定的 cookie</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">modify</span>(<span class="params">key, value, expiresHours</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> cookie = key + <span class="string">"="</span> + value</span><br><span class="line">    <span class="comment">//判断是否设置过期时间,0代表关闭浏览器时失效</span></span><br><span class="line">    <span class="keyword">if</span> (expiresHours &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + expiresHours * <span class="number">3600</span> * <span class="number">1000</span>) <span class="comment">// 设置失效时间, 单位为小时</span></span><br><span class="line">        cookie = cookie + <span class="string">"; expires="</span> + date.toGMTString()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.cookie = cookie</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取指定的-cookie-的值"><a href="#获取指定的-cookie-的值" class="headerlink" title="获取指定的 cookie 的值"></a>获取指定的 cookie 的值</h2><h3 id="把-cookie-转化成一个对象获取对象的值"><a href="#把-cookie-转化成一个对象获取对象的值" class="headerlink" title="把 cookie 转化成一个对象获取对象的值"></a>把 cookie 转化成一个对象获取对象的值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> cookieMap = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> cookie = <span class="built_in">document</span>.cookie</span><br><span class="line">    <span class="keyword">if</span> (cookie.length) &#123;</span><br><span class="line">        c = cookie.split(<span class="string">'; '</span>)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; c.length; i++) &#123;</span><br><span class="line">            cookieMap[c[i].split(<span class="string">'='</span>)[<span class="number">0</span>].trim()] = c[i].split(<span class="string">'='</span>)[<span class="number">1</span>].trim()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cookieMap[key] || <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="切断-cookie-遍历数组找到同名-key-直接返回"><a href="#切断-cookie-遍历数组找到同名-key-直接返回" class="headerlink" title="切断 cookie 遍历数组找到同名 key 直接返回"></a>切断 cookie 遍历数组找到同名 key 直接返回</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> cookie = <span class="built_in">document</span>.cookie</span><br><span class="line">    <span class="keyword">const</span> cookieArr = cookie.split(<span class="string">"; "</span>)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; cookieArr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> arr = cookieArr[i].split(<span class="string">"="</span>).map(<span class="function"><span class="params">i</span> =&gt;</span> i.trim())</span><br><span class="line">        <span class="keyword">if</span> (arr[<span class="number">0</span>] == key) &#123;</span><br><span class="line">            <span class="keyword">return</span> arr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="生猛的使用字符串截取"><a href="#生猛的使用字符串截取" class="headerlink" title="生猛的使用字符串截取"></a>生猛的使用字符串截取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> search = key + <span class="string">"="</span> <span class="comment">//查询检索的值</span></span><br><span class="line">    <span class="keyword">let</span> returnValue = <span class="string">""</span>; <span class="comment">//返回值</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.cookie.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> start = <span class="built_in">document</span>.cookie.indexOf(search);</span><br><span class="line">        <span class="keyword">if</span> (start != <span class="number">-1</span>) &#123;</span><br><span class="line">            start += search.length;</span><br><span class="line">            end = <span class="built_in">document</span>.cookie.indexOf(<span class="string">";"</span>, start);</span><br><span class="line">            <span class="keyword">if</span> (end == <span class="number">-1</span>) end = <span class="built_in">document</span>.cookie.length;</span><br><span class="line">            returnValue = <span class="built_in">document</span>.cookie.substring(start, end);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> returnValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="正则匹配"><a href="#正则匹配" class="headerlink" title="正则匹配"></a>正则匹配</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^| )"</span> + key + <span class="string">"=([^;]*)(;|$)"</span>);</span><br><span class="line">    <span class="keyword">let</span> arr;</span><br><span class="line">    <span class="keyword">if</span> (arr = <span class="built_in">document</span>.cookie.match(reg))</span><br><span class="line">        <span class="keyword">return</span> arr[<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> cookie = <span class="built_in">document</span>.cookie</span><br><span class="line">    <span class="keyword">const</span> cookieMap = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="regexp">/([^=; ]*)=([^; ]*)/g</span></span><br><span class="line">    cookie.replace(reg, (...args) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> [, k, v] = args</span><br><span class="line">        cookieMap[k] = v</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cookieMap[key] || <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%BC%8F%E6%B4%9E/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">文件操作漏洞</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-01 17:50:30 / 修改时间：18:07:36" itemprop="dateCreated datePublished" datetime="2020-03-01T17:50:30+08:00">2020-03-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">网络安全</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>197</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="常见的文件操作"><a href="#常见的文件操作" class="headerlink" title="常见的文件操作"></a>常见的文件操作</h2><h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><ul><li>上传头像</li><li>上传附件</li></ul><h3 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h3><ul><li>下载应用</li><li>下载附件</li></ul><h2 id="文件操作漏洞"><a href="#文件操作漏洞" class="headerlink" title="文件操作漏洞"></a>文件操作漏洞</h2><h3 id="文件上传-1"><a href="#文件上传-1" class="headerlink" title="文件上传"></a>文件上传</h3><ul><li>上传 webshell</li><li>上传木马</li></ul><h3 id="文件下载-1"><a href="#文件下载-1" class="headerlink" title="文件下载"></a>文件下载</h3><ul><li>下载系统任意文件</li><li>下载程序代码</li><li>下载配置文件</li></ul><h2 id="文件上传漏洞"><a href="#文件上传漏洞" class="headerlink" title="文件上传漏洞"></a>文件上传漏洞</h2><h3 id="正常上传流程"><a href="#正常上传流程" class="headerlink" title="正常上传流程"></a>正常上传流程</h3><p><img src="/note-images/2020-03-01-17-54-25.png" alt="2020-03-01-17-54-25"></p><h3 id="恶意文件上传"><a href="#恶意文件上传" class="headerlink" title="恶意文件上传"></a>恶意文件上传</h3><p><img src="/note-images/2020-03-01-17-55-12.png" alt="2020-03-01-17-55-12"></p><p><img src="/note-images/2020-03-01-17-55-30.png" alt="2020-03-01-17-55-30"></p><p><img src="/note-images/2020-03-01-17-55-48.png" alt="2020-03-01-17-55-48"></p><p><img src="/note-images/2020-03-01-17-56-01.png" alt="2020-03-01-17-56-01"></p><h4 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h4><ul><li>可以上传可执行脚本</li><li>脚本拥有执行权限</li></ul><h4 id="利用"><a href="#利用" class="headerlink" title="利用"></a>利用</h4><p><img src="/note-images/2020-03-01-17-57-58.png" alt="2020-03-01-17-57-58"></p><h2 id="任意文件下载漏洞"><a href="#任意文件下载漏洞" class="headerlink" title="任意文件下载漏洞"></a>任意文件下载漏洞</h2><p>正常下载<br><img src="/note-images/2020-03-01-17-58-59.png" alt="2020-03-01-17-58-59"></p><p>异常下载<br><img src="/note-images/2020-03-01-17-59-40.png" alt="2020-03-01-17-59-40"></p><p><img src="/note-images/2020-03-01-17-59-58.png" alt="2020-03-01-17-59-58"></p><p><img src="/note-images/2020-03-01-18-00-51.png" alt="2020-03-01-18-00-51"></p><h3 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h3><ul><li>代码泄露</li><li>数据库配置文件泄露</li><li>系统文件泄露</li></ul><h3 id="前提-1"><a href="#前提-1" class="headerlink" title="前提"></a>前提</h3><ul><li>未验证下载文件格式</li><li>未限制请求路径</li></ul><h3 id="利用-1"><a href="#利用-1" class="headerlink" title="利用"></a>利用</h3><p><img src="/note-images/2020-03-01-18-03-46.png" alt="2020-03-01-18-03-46"></p><h2 id="文件包含漏洞"><a href="#文件包含漏洞" class="headerlink" title="文件包含漏洞"></a>文件包含漏洞</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul><li>本地文件包含</li><li>远程文件包含</li></ul><h3 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h3><p><img src="/note-images/2020-03-01-18-06-20.png" alt="2020-03-01-18-06-20"></p><p><img src="/note-images/2020-03-01-18-06-42.png" alt="2020-03-01-18-06-42"></p><p><img src="/note-images/2020-03-01-18-06-59.png" alt="2020-03-01-18-06-59"></p><p><img src="/note-images/2020-03-01-18-07-09.png" alt="2020-03-01-18-07-09"></p><p><img src="/note-images/2020-03-01-18-07-34.png" alt="2020-03-01-18-07-34"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/" class="post-title-link" itemprop="url">命令注入</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-01 17:16:30 / 修改时间：17:39:39" itemprop="dateCreated datePublished" datetime="2020-03-01T17:16:30+08:00">2020-03-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">网络安全</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>411</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><p><img src="/note-images/2020-03-01-17-12-07.png" alt="2020-03-01-17-12-07"></p><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>查看本地网络</td><td>ipconfig</td></tr><tr><td>查看系统用户</td><td>net user</td></tr><tr><td>查看目录</td><td>dir “{path}”</td></tr><tr><td>字符串查找</td><td>find ‘hello’ ./text.txt (在 text.txt 文件中查找 hello 的行)</td></tr></tbody></table><h3 id="复合命令"><a href="#复合命令" class="headerlink" title="复合命令"></a>复合命令</h3><p>命令拼接 <strong>&amp;</strong> 依次执行拼接的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo 'hello' &amp; echo 'world'</span><br><span class="line"></span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure><p>管道符 <strong>|</strong> 依次执行拼接的命令, 前边命令的输出作为后边命令的输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ipconfig | find 'IPv4'</span><br><span class="line"></span><br><span class="line">各种 IPv4 的 ip 地址</span><br></pre></td></tr></table></figure><h3 id="假传圣旨-图例"><a href="#假传圣旨-图例" class="headerlink" title="假传圣旨(图例)"></a>假传圣旨(图例)</h3><p>正常流程<br><img src="/note-images/2020-03-01-17-22-19.png" alt="2020-03-01-17-22-19"></p><p>修改后的流程<br><img src="/note-images/2020-03-01-17-23-43.png" alt="2020-03-01-17-23-43"></p><h2 id="命令注入原理"><a href="#命令注入原理" class="headerlink" title="命令注入原理"></a>命令注入原理</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ul><li>调用可执行系统命令的函数</li><li>函数或者函数的参数可控</li><li>拼接注入命令</li></ul><h3 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h3><ul><li>客户端构造命令, 并发送到服务端</li><li>服务端拼接命令并执行明林</li><li>命令执行的结果返回给 web 端</li></ul><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>php 代码<br><img src="/note-images/2020-03-01-17-27-27.png" alt="2020-03-01-17-27-27"></p><p>前端交互<br><img src="/note-images/2020-03-01-17-27-59.png" alt="2020-03-01-17-27-59"></p><h2 id="参数可控示例"><a href="#参数可控示例" class="headerlink" title="参数可控示例"></a>参数可控示例</h2><p>php 代码<br><img src="/note-images/2020-03-01-17-29-12.png" alt="2020-03-01-17-29-12"></p><p>前端交互<br><img src="/note-images/2020-03-01-17-30-17.png" alt="2020-03-01-17-30-17"></p><p>执行攻击的流程<br><img src="/note-images/2020-03-01-17-32-05.png" alt="2020-03-01-17-32-05"></p><p>执行结果<br><img src="/note-images/2020-03-01-17-32-37.png" alt="2020-03-01-17-32-37"></p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>进行命令注入攻击时, url 中的 &amp; 要进行 urlEncode. 否则会被认为是一个参数分隔符</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/SQL-%E6%B3%A8%E5%85%A5/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/SQL-%E6%B3%A8%E5%85%A5/" class="post-title-link" itemprop="url">SQL 注入</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-01 16:16:30 / 修改时间：17:09:26" itemprop="dateCreated datePublished" datetime="2020-03-01T16:16:30+08:00">2020-03-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">网络安全</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>375</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>SQL 注入, 又叫 SQL Injection. 是一种常见的 web 安全漏洞. 是指 web 应用程序对用户输入数据的合法性没有判断或过滤不严, 攻击者可以在 web 应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句, 在管理员不知情的情况下实现非法操作, 以此来实现欺骗数据库服务器执行非授权的任意查询, 从而进一步得到相应的数据信息的攻击方式</p><p><img src="/note-images/2020-03-01-17-02-49.png" alt="2020-03-01-17-02-49"></p><h2 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h2><p><strong>数据</strong>和<strong>代码</strong>未分离, 把数据当成代码来执行了…</p><h2 id="万能密码"><a href="#万能密码" class="headerlink" title="万能密码"></a>万能密码</h2><h3 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h3><p>正常用户登录过程<br>前端交互<br><img src="/note-images/2020-03-01-16-51-26.png" alt="2020-03-01-16-51-26"></p><p>后端处理逻辑<br><img src="/note-images/2020-03-01-16-57-56.png" alt="2020-03-01-16-57-56"></p><p>黑客的登录过程<br>前端交互<br><img src="/note-images/2020-03-01-16-52-24.png" alt="2020-03-01-16-52-24"></p><p>后端处理逻辑<br><img src="/note-images/2020-03-01-16-59-33.png" alt="2020-03-01-16-59-33"></p><p>两者对比<br><img src="/note-images/2020-03-01-16-53-04.png" alt="2020-03-01-16-53-04"></p><h3 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h3><ul><li>获取用户请求参数</li><li>将用户端发来的请求参数直接用于拼接 SQL</li><li>执行 SQL</li></ul><h3 id="必备条件"><a href="#必备条件" class="headerlink" title="必备条件"></a>必备条件</h3><ul><li>可以控制的输入数据</li><li>服务器要执行的代码拼接了控制的数据</li></ul><h2 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h2><h3 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h3><ul><li>获取管理员 or 其他用户的用户名密码等敏感信息</li><li>拖库</li></ul><h3 id="获取服务器权限"><a href="#获取服务器权限" class="headerlink" title="获取服务器权限"></a>获取服务器权限</h3><ul><li>植入webshell, 获取服务器后门</li><li>读取服务器敏感文件</li><li>万能密码</li><li>…</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/interview/interview-2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/interview/interview-2/" class="post-title-link" itemprop="url">interview-2</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-01 13:50:31" itemprop="dateCreated datePublished" datetime="2020-03-01T13:50:31+08:00">2020-03-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-03-02 22:06:22" itemprop="dateModified" datetime="2020-03-02T22:06:22+08:00">2020-03-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>956</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="输出的结果是？为什么"><a href="#输出的结果是？为什么" class="headerlink" title="[] == [] 输出的结果是？为什么"></a>[] == [] 输出的结果是？为什么</h2><p>返回 false</p><p>原因:</p><ul><li>字符串与数字之间的比较: 字符串 -&gt; 数字</li><li>其他类型与布尔值之间的比较: 布尔值先转成数字在比较</li><li>null 和 undefined 比较: 两者相等</li><li>对象和非对象(非布尔值)之间的比较: 对象先调用 ToPrimitive 方法</li></ul><p>问题中, 由于 [] == [] 双等号边都是 [], 属于对象类型, 所以直接比较其值, 不进行隐式类型转换. 且两者都是引用类型, 比价其引用地址位置. 故不相等</p><p>然而, [] == ![] =&gt; true 套用以上的公式就可以得出了</p><h2 id="请说出三种减少网页加载时间的方法"><a href="#请说出三种减少网页加载时间的方法" class="headerlink" title="请说出三种减少网页加载时间的方法"></a>请说出三种减少网页加载时间的方法</h2><ul><li>尽量减少页面中重复http请求数量</li><li>服务器开启gzip压缩</li><li>css样式的定义放置在文件的头部</li><li>JavaScript脚本放置在文件末尾</li><li>压缩合并JavaScript.css代码</li><li>使用多域名负载网页内的多个文件.图片</li><li>合理利用缓存</li></ul><h2 id="CSS-中-box-sizing-有哪些值-区别是什么"><a href="#CSS-中-box-sizing-有哪些值-区别是什么" class="headerlink" title="CSS 中 box-sizing 有哪些值?区别是什么"></a>CSS 中 box-sizing 有哪些值?区别是什么</h2><p>box-sizing 定义了用户应该如何计算盒子的宽度和高度, 属性值有两个</p><ul><li>content-box (默认值), 其中设置的 width 和 height 只包含内容的宽度和高度, 但是不包含内边距(padding) 边框(border) 和 外边距(margin)</li><li>border-box 设置的 width 和 height 包含了内容的宽度和高度, 同时包含了内边距(padding) 边框(border), 不包含外边距(margin)</li><li>inherit 规定应从父元素继承 box-sizing 属性的值</li></ul><h2 id="DOM-Tree-与-Render-Tree-之间的区别是什么"><a href="#DOM-Tree-与-Render-Tree-之间的区别是什么" class="headerlink" title="DOM Tree 与 Render Tree 之间的区别是什么"></a>DOM Tree 与 Render Tree 之间的区别是什么</h2><p>DOM Tree: 包含了所有的 HTML 标签, 包括 display: none 的元素, JS动态添加的元素等.<br>Render Tree: DOM Tree 和样式结构体结合后构建呈现 Render Tree. Render Tree 能识别样式, 每个 node 都有自己的style, 且不包含隐藏的节点(比如 display: none 的节点)</p><h2 id="在Javascript中什么情况下会进行装箱-拆箱转换"><a href="#在Javascript中什么情况下会进行装箱-拆箱转换" class="headerlink" title="在Javascript中什么情况下会进行装箱/拆箱转换"></a>在Javascript中什么情况下会进行装箱/拆箱转换</h2><p>装箱: 把基本数据类型转化为引用数据类型的操作<br>拆箱: 把引用数据类型转化为基本数据类型的操作, 通过 toString, valueOf 方法实现<br>在 Javascript 中出现基本数据类型数据和引用数据类型数据要进行转换的情况下会进行装箱/拆箱操作</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://book.douban.com/subject/26854244/" target="_blank" rel="noopener">你不知道的JavaScript（中卷）</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"> <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="圈圈的圈" src="/images/avatar.jpeg"><p class="site-author-name" itemprop="name">圈圈的圈</p><div class="site-description" itemprop="description">技术学习, 读书笔记, 生活感悟~</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">41</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">7</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">24</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://juejin.im/user/5837c2bd61ff4b006ca8d1b2" title="掘金 → https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;5837c2bd61ff4b006ca8d1b2" rel="noopener" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i> 掘金</a></span><span class="links-of-author-item"><a href="https://github.com/luoquanquan" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;luoquanquan" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:luo_quanquan@163.com" title="E-Mail → mailto:luo_quanquan@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i> RSS</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">圈圈的圈</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span title="站点总字数">57k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span title="站点阅读时长">52 分钟</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/js/theme-next-canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script></body></html>