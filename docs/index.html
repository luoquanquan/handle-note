<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("http://note.niubishanshan.top").hostname,root:"/",scheme:"Gemini",version:"7.7.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.json",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="技术学习, 读书笔记, 生活感悟~"><meta property="og:type" content="website"><meta property="og:title" content="圈圈的随手笔记"><meta property="og:url" content="http://note.niubishanshan.top/index.html"><meta property="og:site_name" content="圈圈的随手笔记"><meta property="og:description" content="技术学习, 读书笔记, 生活感悟~"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="圈圈的圈"><meta property="article:tag" content="前端"><meta property="article:tag" content=" JavaScript"><meta property="article:tag" content=" Node"><meta property="article:tag" content=" 全栈"><meta property="article:tag" content=" 读书"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://note.niubishanshan.top/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1}</script><title>圈圈的随手笔记</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="圈圈的随手笔记" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div> <a href="https://github.com/luoquanquan" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">圈圈的随手笔记</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">路漫漫其修远兮, 吾将上下而求索</p></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/interview/interview-3/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/interview/interview-3/" class="post-title-link" itemprop="url">interview-3</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-03 21:50:31" itemprop="dateCreated datePublished" datetime="2020-03-03T21:50:31+08:00">2020-03-03</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-03-02 23:09:29" itemprop="dateModified" datetime="2020-03-02T23:09:29+08:00">2020-03-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>1.2k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="关于DOMContentLoaded和load事件说法正确的是"><a href="#关于DOMContentLoaded和load事件说法正确的是" class="headerlink" title="关于DOMContentLoaded和load事件说法正确的是"></a>关于DOMContentLoaded和load事件说法正确的是</h2><p>DOMContentLoaded事件比load事件更早执行</p><p>当纯HTML被完全加载以及解析时, DOMContentLoaded 事件会被触发, 而不必等待样式表, 图片或者子框架完成加载</p><p>load 事件仅仅应该在探测到整个页面完全加载完成时被使用. 一个常见的错误就是在该使用 DOMContentLoaded 的地方使用了load</p><h2 id="innerHTML-vs-innerText-vs-outerHTML-vs-outerText"><a href="#innerHTML-vs-innerText-vs-outerHTML-vs-outerText" class="headerlink" title="innerHTML vs innerText vs outerHTML vs outerText"></a>innerHTML vs innerText vs outerHTML vs outerText</h2><ul><li>innerHTML 设置或者获取标签所包含的 HTML 与文本信息, 不含标签本身</li><li>innerText 设置或者获取标签所包含的文本信息, 不含标签本身</li><li>outerHTML 设置或获取标签本身以及所包含的 HTML 与文本信息, 包含本身</li><li>outerText 设置或获取标签本身以及所包含的文本信息, 包含本身</li></ul><p>示例:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>this is text<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> div = <span class="built_in">document</span>.querySelector(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'div.innerHTML'</span>, div.innerHTML);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'div.innerText'</span>, div.innerText);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'div.outerHTML'</span>, div.outerHTML);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'div.outerText'</span>, div.outerText);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 控制台打印的结果为</span></span><br><span class="line"><span class="comment">div.innerHTML &lt;p&gt;this is text&lt;/p&gt;</span></span><br><span class="line"><span class="comment">index.html:5 div.innerText this is text</span></span><br><span class="line"><span class="comment">index.html:6 div.outerHTML &lt;div id="div1"&gt;&lt;p&gt;this is text&lt;/p&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">index.html:7 div.outerText this is text</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="块级元素-vs-行内元素"><a href="#块级元素-vs-行内元素" class="headerlink" title="块级元素 vs 行内元素"></a>块级元素 vs 行内元素</h2><h3 id="HTML-将标签分为容器级和文本级"><a href="#HTML-将标签分为容器级和文本级" class="headerlink" title="HTML 将标签分为容器级和文本级"></a>HTML 将标签分为容器级和文本级</h3><h4 id="容器级"><a href="#容器级" class="headerlink" title="容器级"></a>容器级</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div  h  li dl dd dt ul li</span><br></pre></td></tr></table></figure><h4 id="文本级"><a href="#文本级" class="headerlink" title="文本级"></a>文本级</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p b a span em i u</span><br></pre></td></tr></table></figure><h3 id="CSS-将标签分为块级元素和行内元素"><a href="#CSS-将标签分为块级元素和行内元素" class="headerlink" title="CSS 将标签分为块级元素和行内元素"></a>CSS 将标签分为块级元素和行内元素</h3><h4 id="块级元素"><a href="#块级元素" class="headerlink" title="块级元素"></a>块级元素</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div h li p dd dt</span><br></pre></td></tr></table></figure><h4 id="行内元素"><a href="#行内元素" class="headerlink" title="行内元素"></a>行内元素</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a b span em u i</span><br></pre></td></tr></table></figure><h2 id="CSS-权重列表"><a href="#CSS-权重列表" class="headerlink" title="CSS 权重列表"></a>CSS 权重列表</h2><table><thead><tr><th>权重</th><th>选择器</th></tr></thead><tbody><tr><td>10000</td><td>!important</td></tr><tr><td>1000</td><td>内联样式</td></tr><tr><td>100</td><td>id 选择器</td></tr><tr><td>10</td><td>类 / 伪类 / 属性选择器</td></tr><tr><td>1</td><td>标签 / 伪元素选择器</td></tr><tr><td>0</td><td>通用选择器 * / 子选择器 &gt; / 相邻选择器 + / 同胞选择器 ~</td></tr></tbody></table><h2 id="伪元素和伪类"><a href="#伪元素和伪类" class="headerlink" title="伪元素和伪类"></a>伪元素和伪类</h2><p>总结了一篇文章在<a href="">这里</a></p><h2 id="1-gt-gt-gt-32-的值为"><a href="#1-gt-gt-gt-32-的值为" class="headerlink" title="-1 &gt;&gt;&gt; 32 的值为"></a>-1 &gt;&gt;&gt; 32 的值为</h2></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/CSS/%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/CSS/%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0/" class="post-title-link" itemprop="url">伪类和伪元素</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-02 20:10:31 / 修改时间：23:10:15" itemprop="dateCreated datePublished" datetime="2020-03-02T20:10:31+08:00">2020-03-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>965</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>伪类和伪元素是为了格式化文档以外的信息, 也就是说, 伪类和伪元素是用来修饰不在文档树中的部分. 比如, 一句话中的第一个字母, 或者是列表中的第一个元素…</p></blockquote><h2 id="伪类"><a href="#伪类" class="headerlink" title="伪类"></a>伪类</h2><p>伪类用于当已有元素处于的某个状态时, 为其添加对应的样式, 这个状态是根据用户行为而动态变化的.</p><p><img src="/note-images/2020-03-02-22-34-04.png" alt="2020-03-02-22-34-04"></p><h2 id="伪元素"><a href="#伪元素" class="headerlink" title="伪元素"></a>伪元素</h2><p>伪元素用于创建一些不在文档树中的元素, 并为其添加样式</p><p><img src="/note-images/2020-03-02-22-34-56.png" alt="2020-03-02-22-34-56"></p><h2 id="伪类和伪元素的区别"><a href="#伪类和伪元素的区别" class="headerlink" title="伪类和伪元素的区别"></a>伪类和伪元素的区别</h2><h3 id="例一"><a href="#例一" class="headerlink" title="例一"></a>例一</h3><p>假设有这样的 html 片段</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果想要给第一项添加样式, 需要给第一项添加一个类, 并在该类中定义对应的样式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"first"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.first</span> &#123;</span></span><br><span class="line">        color: red;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其实还可以利用伪类选择器来选择第一个元素 <code>:first-child</code> 为其添加样式.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="例二"><a href="#例二" class="headerlink" title="例二"></a>例二</h3><p>假设有以下 HTML 代码段</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果想要给该段落的第一个字母添加样式, 可以添加一个标签包裹第一个元素, 例如:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>H<span class="tag">&lt;/<span class="name">span</span>&gt;</span>ello World!</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    span &#123;</span><br><span class="line">        color: red;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果不创建这个元素, 还可以使用 <code>:first-letter</code> 伪元素来为其添加样式. 这个时候, 看起来像是创建了一个虚拟的 <code>span</code> 元素并添加了样式, 但实际上文档树中并没有 <code>span</code> 这个元素</p><p>从上述例子中可以看出, 伪类的操作对象是文档树中已有的元素, 而伪元素则创建了一个文档树外的元素. 伪类与伪元素的区别在于: 有没有创建一个文档树之外的元素</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><a href="https://www.w3school.com.cn/css/css_pseudo_elements.asp" target="_blank" rel="noopener">CSS 伪元素</a></li><li><a href="https://www.w3school.com.cn/css/css_pseudo_classes.asp" target="_blank" rel="noopener">CSS 伪类 (Pseudo-classes)</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes" target="_blank" rel="noopener">伪类</a></li><li><a href="https://www.cnblogs.com/ihardcoder/p/5294927.html" target="_blank" rel="noopener">CSS3伪类和伪元素的特性和区别</a></li><li><a href="https://blog.csdn.net/weixin_42420703/article/details/84863556" target="_blank" rel="noopener">伪类和伪元素的区别</a></li><li><a href="https://zhuanlan.zhihu.com/p/46909886" target="_blank" rel="noopener">CSS中伪类与伪元素，你弄懂了吗？</a></li><li><a href="https://www.cnblogs.com/ammyben/p/8012747.html" target="_blank" rel="noopener">伪类与伪元素的区别</a></li><li><a href="http://www.javanx.cn/20180928/css-selector/" target="_blank" rel="noopener">CSS选择器如此之多，你了解多少？</a></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/basic-js/cookie/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/basic-js/cookie/" class="post-title-link" itemprop="url">Cookie</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-02 13:20:31 / 修改时间：15:42:33" itemprop="dateCreated datePublished" datetime="2020-03-02T13:20:31+08:00">2020-03-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.1k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="添加一条-cookie"><a href="#添加一条-cookie" class="headerlink" title="添加一条 cookie"></a>添加一条 cookie</h2><h3 id="简单粗暴的方法"><a href="#简单粗暴的方法" class="headerlink" title="简单粗暴的方法"></a>简单粗暴的方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie=<span class="string">"key=quanquan"</span></span><br></pre></td></tr></table></figure><h3 id="文艺一点的方法"><a href="#文艺一点的方法" class="headerlink" title="文艺一点的方法"></a>文艺一点的方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">key, value, expiresHours</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> cookie = key + <span class="string">"="</span> + value</span><br><span class="line">    <span class="comment">//判断是否设置过期时间, 0代表关闭浏览器时失效</span></span><br><span class="line">    <span class="keyword">if</span> (expiresHours &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + expiresHours * <span class="number">3600</span> * <span class="number">1000</span>)</span><br><span class="line">        cookie = cookie + <span class="string">"; expires="</span> + date.toGMTString()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.cookie = cookie</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="删除指定的-cookie"><a href="#删除指定的-cookie" class="headerlink" title="删除指定的 cookie"></a>删除指定的 cookie</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteCookie</span> (<span class="params">key</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() - <span class="number">1</span>) <span class="comment">// 过去的时间</span></span><br><span class="line">    <span class="built_in">document</span>.cookie = key + <span class="string">"=value; expires="</span> + date.toGMTString() <span class="comment">// 此时这条记录就已经是过期的啦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="更新指定的-cookie"><a href="#更新指定的-cookie" class="headerlink" title="更新指定的 cookie"></a>更新指定的 cookie</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">modify</span>(<span class="params">key, value, expiresHours</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> cookie = key + <span class="string">"="</span> + value</span><br><span class="line">    <span class="comment">//判断是否设置过期时间,0代表关闭浏览器时失效</span></span><br><span class="line">    <span class="keyword">if</span> (expiresHours &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + expiresHours * <span class="number">3600</span> * <span class="number">1000</span>) <span class="comment">// 设置失效时间, 单位为小时</span></span><br><span class="line">        cookie = cookie + <span class="string">"; expires="</span> + date.toGMTString()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.cookie = cookie</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取指定的-cookie-的值"><a href="#获取指定的-cookie-的值" class="headerlink" title="获取指定的 cookie 的值"></a>获取指定的 cookie 的值</h2><h3 id="把-cookie-转化成一个对象获取对象的值"><a href="#把-cookie-转化成一个对象获取对象的值" class="headerlink" title="把 cookie 转化成一个对象获取对象的值"></a>把 cookie 转化成一个对象获取对象的值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> cookieMap = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> cookie = <span class="built_in">document</span>.cookie</span><br><span class="line">    <span class="keyword">if</span> (cookie.length) &#123;</span><br><span class="line">        c = cookie.split(<span class="string">'; '</span>)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; c.length; i++) &#123;</span><br><span class="line">            cookieMap[c[i].split(<span class="string">'='</span>)[<span class="number">0</span>].trim()] = c[i].split(<span class="string">'='</span>)[<span class="number">1</span>].trim()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cookieMap[key] || <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="切断-cookie-遍历数组找到同名-key-直接返回"><a href="#切断-cookie-遍历数组找到同名-key-直接返回" class="headerlink" title="切断 cookie 遍历数组找到同名 key 直接返回"></a>切断 cookie 遍历数组找到同名 key 直接返回</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> cookie = <span class="built_in">document</span>.cookie</span><br><span class="line">    <span class="keyword">const</span> cookieArr = cookie.split(<span class="string">"; "</span>)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; cookieArr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> arr = cookieArr[i].split(<span class="string">"="</span>).map(<span class="function"><span class="params">i</span> =&gt;</span> i.trim())</span><br><span class="line">        <span class="keyword">if</span> (arr[<span class="number">0</span>] == key) &#123;</span><br><span class="line">            <span class="keyword">return</span> arr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="生猛的使用字符串截取"><a href="#生猛的使用字符串截取" class="headerlink" title="生猛的使用字符串截取"></a>生猛的使用字符串截取</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> search = key + <span class="string">"="</span> <span class="comment">//查询检索的值</span></span><br><span class="line">    <span class="keyword">let</span> returnValue = <span class="string">""</span>; <span class="comment">//返回值</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.cookie.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> start = <span class="built_in">document</span>.cookie.indexOf(search);</span><br><span class="line">        <span class="keyword">if</span> (start != <span class="number">-1</span>) &#123;</span><br><span class="line">            start += search.length;</span><br><span class="line">            end = <span class="built_in">document</span>.cookie.indexOf(<span class="string">";"</span>, start);</span><br><span class="line">            <span class="keyword">if</span> (end == <span class="number">-1</span>) end = <span class="built_in">document</span>.cookie.length;</span><br><span class="line">            returnValue = <span class="built_in">document</span>.cookie.substring(start, end);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> returnValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="正则匹配"><a href="#正则匹配" class="headerlink" title="正则匹配"></a>正则匹配</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^| )"</span> + key + <span class="string">"=([^;]*)(;|$)"</span>);</span><br><span class="line">    <span class="keyword">let</span> arr;</span><br><span class="line">    <span class="keyword">if</span> (arr = <span class="built_in">document</span>.cookie.match(reg))</span><br><span class="line">        <span class="keyword">return</span> arr[<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> cookie = <span class="built_in">document</span>.cookie</span><br><span class="line">    <span class="keyword">const</span> cookieMap = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="regexp">/([^=; ]*)=([^; ]*)/g</span></span><br><span class="line">    cookie.replace(reg, (...args) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> [, k, v] = args</span><br><span class="line">        cookieMap[k] = v</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cookieMap[key] || <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%BC%8F%E6%B4%9E/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%BC%8F%E6%B4%9E/" class="post-title-link" itemprop="url">文件操作漏洞</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-01 17:50:30 / 修改时间：18:07:36" itemprop="dateCreated datePublished" datetime="2020-03-01T17:50:30+08:00">2020-03-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">网络安全</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>197</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="常见的文件操作"><a href="#常见的文件操作" class="headerlink" title="常见的文件操作"></a>常见的文件操作</h2><h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><ul><li>上传头像</li><li>上传附件</li></ul><h3 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h3><ul><li>下载应用</li><li>下载附件</li></ul><h2 id="文件操作漏洞"><a href="#文件操作漏洞" class="headerlink" title="文件操作漏洞"></a>文件操作漏洞</h2><h3 id="文件上传-1"><a href="#文件上传-1" class="headerlink" title="文件上传"></a>文件上传</h3><ul><li>上传 webshell</li><li>上传木马</li></ul><h3 id="文件下载-1"><a href="#文件下载-1" class="headerlink" title="文件下载"></a>文件下载</h3><ul><li>下载系统任意文件</li><li>下载程序代码</li><li>下载配置文件</li></ul><h2 id="文件上传漏洞"><a href="#文件上传漏洞" class="headerlink" title="文件上传漏洞"></a>文件上传漏洞</h2><h3 id="正常上传流程"><a href="#正常上传流程" class="headerlink" title="正常上传流程"></a>正常上传流程</h3><p><img src="/note-images/2020-03-01-17-54-25.png" alt="2020-03-01-17-54-25"></p><h3 id="恶意文件上传"><a href="#恶意文件上传" class="headerlink" title="恶意文件上传"></a>恶意文件上传</h3><p><img src="/note-images/2020-03-01-17-55-12.png" alt="2020-03-01-17-55-12"></p><p><img src="/note-images/2020-03-01-17-55-30.png" alt="2020-03-01-17-55-30"></p><p><img src="/note-images/2020-03-01-17-55-48.png" alt="2020-03-01-17-55-48"></p><p><img src="/note-images/2020-03-01-17-56-01.png" alt="2020-03-01-17-56-01"></p><h4 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h4><ul><li>可以上传可执行脚本</li><li>脚本拥有执行权限</li></ul><h4 id="利用"><a href="#利用" class="headerlink" title="利用"></a>利用</h4><p><img src="/note-images/2020-03-01-17-57-58.png" alt="2020-03-01-17-57-58"></p><h2 id="任意文件下载漏洞"><a href="#任意文件下载漏洞" class="headerlink" title="任意文件下载漏洞"></a>任意文件下载漏洞</h2><p>正常下载<br><img src="/note-images/2020-03-01-17-58-59.png" alt="2020-03-01-17-58-59"></p><p>异常下载<br><img src="/note-images/2020-03-01-17-59-40.png" alt="2020-03-01-17-59-40"></p><p><img src="/note-images/2020-03-01-17-59-58.png" alt="2020-03-01-17-59-58"></p><p><img src="/note-images/2020-03-01-18-00-51.png" alt="2020-03-01-18-00-51"></p><h3 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h3><ul><li>代码泄露</li><li>数据库配置文件泄露</li><li>系统文件泄露</li></ul><h3 id="前提-1"><a href="#前提-1" class="headerlink" title="前提"></a>前提</h3><ul><li>未验证下载文件格式</li><li>未限制请求路径</li></ul><h3 id="利用-1"><a href="#利用-1" class="headerlink" title="利用"></a>利用</h3><p><img src="/note-images/2020-03-01-18-03-46.png" alt="2020-03-01-18-03-46"></p><h2 id="文件包含漏洞"><a href="#文件包含漏洞" class="headerlink" title="文件包含漏洞"></a>文件包含漏洞</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul><li>本地文件包含</li><li>远程文件包含</li></ul><h3 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h3><p><img src="/note-images/2020-03-01-18-06-20.png" alt="2020-03-01-18-06-20"></p><p><img src="/note-images/2020-03-01-18-06-42.png" alt="2020-03-01-18-06-42"></p><p><img src="/note-images/2020-03-01-18-06-59.png" alt="2020-03-01-18-06-59"></p><p><img src="/note-images/2020-03-01-18-07-09.png" alt="2020-03-01-18-07-09"></p><p><img src="/note-images/2020-03-01-18-07-34.png" alt="2020-03-01-18-07-34"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/" class="post-title-link" itemprop="url">命令注入</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-01 17:16:30 / 修改时间：17:39:39" itemprop="dateCreated datePublished" datetime="2020-03-01T17:16:30+08:00">2020-03-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">网络安全</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>411</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><p><img src="/note-images/2020-03-01-17-12-07.png" alt="2020-03-01-17-12-07"></p><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>查看本地网络</td><td>ipconfig</td></tr><tr><td>查看系统用户</td><td>net user</td></tr><tr><td>查看目录</td><td>dir “{path}”</td></tr><tr><td>字符串查找</td><td>find ‘hello’ ./text.txt (在 text.txt 文件中查找 hello 的行)</td></tr></tbody></table><h3 id="复合命令"><a href="#复合命令" class="headerlink" title="复合命令"></a>复合命令</h3><p>命令拼接 <strong>&amp;</strong> 依次执行拼接的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo 'hello' &amp; echo 'world'</span><br><span class="line"></span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure><p>管道符 <strong>|</strong> 依次执行拼接的命令, 前边命令的输出作为后边命令的输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ipconfig | find 'IPv4'</span><br><span class="line"></span><br><span class="line">各种 IPv4 的 ip 地址</span><br></pre></td></tr></table></figure><h3 id="假传圣旨-图例"><a href="#假传圣旨-图例" class="headerlink" title="假传圣旨(图例)"></a>假传圣旨(图例)</h3><p>正常流程<br><img src="/note-images/2020-03-01-17-22-19.png" alt="2020-03-01-17-22-19"></p><p>修改后的流程<br><img src="/note-images/2020-03-01-17-23-43.png" alt="2020-03-01-17-23-43"></p><h2 id="命令注入原理"><a href="#命令注入原理" class="headerlink" title="命令注入原理"></a>命令注入原理</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ul><li>调用可执行系统命令的函数</li><li>函数或者函数的参数可控</li><li>拼接注入命令</li></ul><h3 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h3><ul><li>客户端构造命令, 并发送到服务端</li><li>服务端拼接命令并执行明林</li><li>命令执行的结果返回给 web 端</li></ul><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>php 代码<br><img src="/note-images/2020-03-01-17-27-27.png" alt="2020-03-01-17-27-27"></p><p>前端交互<br><img src="/note-images/2020-03-01-17-27-59.png" alt="2020-03-01-17-27-59"></p><h2 id="参数可控示例"><a href="#参数可控示例" class="headerlink" title="参数可控示例"></a>参数可控示例</h2><p>php 代码<br><img src="/note-images/2020-03-01-17-29-12.png" alt="2020-03-01-17-29-12"></p><p>前端交互<br><img src="/note-images/2020-03-01-17-30-17.png" alt="2020-03-01-17-30-17"></p><p>执行攻击的流程<br><img src="/note-images/2020-03-01-17-32-05.png" alt="2020-03-01-17-32-05"></p><p>执行结果<br><img src="/note-images/2020-03-01-17-32-37.png" alt="2020-03-01-17-32-37"></p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>进行命令注入攻击时, url 中的 &amp; 要进行 urlEncode. 否则会被认为是一个参数分隔符</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/SQL-%E6%B3%A8%E5%85%A5/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%AD%E7%BB%83%E8%AF%BE-%E7%AC%94%E8%AE%B0/%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E/SQL-%E6%B3%A8%E5%85%A5/" class="post-title-link" itemprop="url">SQL 注入</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-01 16:16:30 / 修改时间：17:09:26" itemprop="dateCreated datePublished" datetime="2020-03-01T16:16:30+08:00">2020-03-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">网络安全</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>375</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>SQL 注入, 又叫 SQL Injection. 是一种常见的 web 安全漏洞. 是指 web 应用程序对用户输入数据的合法性没有判断或过滤不严, 攻击者可以在 web 应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句, 在管理员不知情的情况下实现非法操作, 以此来实现欺骗数据库服务器执行非授权的任意查询, 从而进一步得到相应的数据信息的攻击方式</p><p><img src="/note-images/2020-03-01-17-02-49.png" alt="2020-03-01-17-02-49"></p><h2 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h2><p><strong>数据</strong>和<strong>代码</strong>未分离, 把数据当成代码来执行了…</p><h2 id="万能密码"><a href="#万能密码" class="headerlink" title="万能密码"></a>万能密码</h2><h3 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h3><p>正常用户登录过程<br>前端交互<br><img src="/note-images/2020-03-01-16-51-26.png" alt="2020-03-01-16-51-26"></p><p>后端处理逻辑<br><img src="/note-images/2020-03-01-16-57-56.png" alt="2020-03-01-16-57-56"></p><p>黑客的登录过程<br>前端交互<br><img src="/note-images/2020-03-01-16-52-24.png" alt="2020-03-01-16-52-24"></p><p>后端处理逻辑<br><img src="/note-images/2020-03-01-16-59-33.png" alt="2020-03-01-16-59-33"></p><p>两者对比<br><img src="/note-images/2020-03-01-16-53-04.png" alt="2020-03-01-16-53-04"></p><h3 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h3><ul><li>获取用户请求参数</li><li>将用户端发来的请求参数直接用于拼接 SQL</li><li>执行 SQL</li></ul><h3 id="必备条件"><a href="#必备条件" class="headerlink" title="必备条件"></a>必备条件</h3><ul><li>可以控制的输入数据</li><li>服务器要执行的代码拼接了控制的数据</li></ul><h2 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h2><h3 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h3><ul><li>获取管理员 or 其他用户的用户名密码等敏感信息</li><li>拖库</li></ul><h3 id="获取服务器权限"><a href="#获取服务器权限" class="headerlink" title="获取服务器权限"></a>获取服务器权限</h3><ul><li>植入webshell, 获取服务器后门</li><li>读取服务器敏感文件</li><li>万能密码</li><li>…</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/interview/interview-2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/interview/interview-2/" class="post-title-link" itemprop="url">interview-2</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-01 13:50:31" itemprop="dateCreated datePublished" datetime="2020-03-01T13:50:31+08:00">2020-03-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-03-02 22:06:22" itemprop="dateModified" datetime="2020-03-02T22:06:22+08:00">2020-03-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>956</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="输出的结果是？为什么"><a href="#输出的结果是？为什么" class="headerlink" title="[] == [] 输出的结果是？为什么"></a>[] == [] 输出的结果是？为什么</h2><p>返回 false</p><p>原因:</p><ul><li>字符串与数字之间的比较: 字符串 -&gt; 数字</li><li>其他类型与布尔值之间的比较: 布尔值先转成数字在比较</li><li>null 和 undefined 比较: 两者相等</li><li>对象和非对象(非布尔值)之间的比较: 对象先调用 ToPrimitive 方法</li></ul><p>问题中, 由于 [] == [] 双等号边都是 [], 属于对象类型, 所以直接比较其值, 不进行隐式类型转换. 且两者都是引用类型, 比价其引用地址位置. 故不相等</p><p>然而, [] == ![] =&gt; true 套用以上的公式就可以得出了</p><h2 id="请说出三种减少网页加载时间的方法"><a href="#请说出三种减少网页加载时间的方法" class="headerlink" title="请说出三种减少网页加载时间的方法"></a>请说出三种减少网页加载时间的方法</h2><ul><li>尽量减少页面中重复http请求数量</li><li>服务器开启gzip压缩</li><li>css样式的定义放置在文件的头部</li><li>JavaScript脚本放置在文件末尾</li><li>压缩合并JavaScript.css代码</li><li>使用多域名负载网页内的多个文件.图片</li><li>合理利用缓存</li></ul><h2 id="CSS-中-box-sizing-有哪些值-区别是什么"><a href="#CSS-中-box-sizing-有哪些值-区别是什么" class="headerlink" title="CSS 中 box-sizing 有哪些值?区别是什么"></a>CSS 中 box-sizing 有哪些值?区别是什么</h2><p>box-sizing 定义了用户应该如何计算盒子的宽度和高度, 属性值有两个</p><ul><li>content-box (默认值), 其中设置的 width 和 height 只包含内容的宽度和高度, 但是不包含内边距(padding) 边框(border) 和 外边距(margin)</li><li>border-box 设置的 width 和 height 包含了内容的宽度和高度, 同时包含了内边距(padding) 边框(border), 不包含外边距(margin)</li><li>inherit 规定应从父元素继承 box-sizing 属性的值</li></ul><h2 id="DOM-Tree-与-Render-Tree-之间的区别是什么"><a href="#DOM-Tree-与-Render-Tree-之间的区别是什么" class="headerlink" title="DOM Tree 与 Render Tree 之间的区别是什么"></a>DOM Tree 与 Render Tree 之间的区别是什么</h2><p>DOM Tree: 包含了所有的 HTML 标签, 包括 display: none 的元素, JS动态添加的元素等.<br>Render Tree: DOM Tree 和样式结构体结合后构建呈现 Render Tree. Render Tree 能识别样式, 每个 node 都有自己的style, 且不包含隐藏的节点(比如 display: none 的节点)</p><h2 id="在Javascript中什么情况下会进行装箱-拆箱转换"><a href="#在Javascript中什么情况下会进行装箱-拆箱转换" class="headerlink" title="在Javascript中什么情况下会进行装箱/拆箱转换"></a>在Javascript中什么情况下会进行装箱/拆箱转换</h2><p>装箱: 把基本数据类型转化为引用数据类型的操作<br>拆箱: 把引用数据类型转化为基本数据类型的操作, 通过 toString, valueOf 方法实现<br>在 Javascript 中出现基本数据类型数据和引用数据类型数据要进行转换的情况下会进行装箱/拆箱操作</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://book.douban.com/subject/26854244/" target="_blank" rel="noopener">你不知道的JavaScript（中卷）</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/%E5%89%8D%E7%AB%AF/interview/interview-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/%E5%89%8D%E7%AB%AF/interview/interview-1/" class="post-title-link" itemprop="url">interview-1</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-02-28 17:50:31" itemprop="dateCreated datePublished" datetime="2020-02-28T17:50:31+08:00">2020-02-28</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-02-29 19:43:09" itemprop="dateModified" datetime="2020-02-29T19:43:09+08:00">2020-02-29</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>1.5k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="请列举几个HTML5语义化标签，并说说语义化有什么优点"><a href="#请列举几个HTML5语义化标签，并说说语义化有什么优点" class="headerlink" title="请列举几个HTML5语义化标签，并说说语义化有什么优点"></a>请列举几个HTML5语义化标签，并说说语义化有什么优点</h2><p>语义化标签:</p><p>页面结构:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">header</span><br><span class="line">nav</span><br><span class="line">main   只能拥有一个</span><br><span class="line">footer</span><br></pre></td></tr></table></figure><p>内容划分:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">blockquoto</span><br><span class="line">section</span><br><span class="line">article</span><br><span class="line">aside</span><br><span class="line">code</span><br><span class="line">abbr</span><br></pre></td></tr></table></figure><p>语义化标签的优点:</p><ol><li>代码结构清晰, 方便阅读, 有利于团队合作</li><li>细粒度内容区域通过标签选择器确定 css 元素, 减少选择器创建</li><li>方便其他设备解析(如屏幕阅读器 盲人阅读器 移动设备)</li><li>有利于搜索引擎优化(SEO)</li></ol><h2 id="请列举几种除了px外的CSS度量单位并解释其含义"><a href="#请列举几种除了px外的CSS度量单位并解释其含义" class="headerlink" title="请列举几种除了px外的CSS度量单位并解释其含义"></a>请列举几种除了px外的CSS度量单位并解释其含义</h2><h3 id="相对单位"><a href="#相对单位" class="headerlink" title="相对单位"></a>相对单位</h3><ul><li>px</li><li>em</li><li>rem</li><li>ex</li><li>%</li></ul><h3 id="绝对单位"><a href="#绝对单位" class="headerlink" title="绝对单位"></a>绝对单位</h3><ul><li>cm</li><li>pt</li><li>in</li><li>pc</li><li>mm</li></ul><h3 id="具体含义"><a href="#具体含义" class="headerlink" title="具体含义"></a>具体含义</h3><h4 id="px"><a href="#px" class="headerlink" title="px"></a>px</h4><p>像素(Pixel). 是屏幕上显示数据的最基本的点. windows 用户使用的分辨率一般为 96 像素/英寸, mac 用户使用的分辨率一般为 72 像素/英寸</p><h4 id="em"><a href="#em" class="headerlink" title="em"></a>em</h4><p>相对于当前元素内文本的字体尺寸, 如果当前元素内文本尺寸没有人为设置, 则相对于浏览器默认的字体尺寸, 1em === 100% 可以结合 css 的继承关系使用. 具有灵活性</p><h4 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h4><p>相对于根元素(html 元素)内文本的字体尺寸, 如果当前元素内文本尺寸没有人为设置, 则相对于浏览器默认的字体尺寸</p><h4 id="ex"><a href="#ex" class="headerlink" title="ex"></a>ex</h4><p>相对于 “x” 的高度, 此高度通常为字体高度的一半</p><h4 id="pt"><a href="#pt" class="headerlink" title="pt"></a>pt</h4><p>点(Point), 印刷行业常用单位. 等于1/72英寸</p><p>1in = 2.54cm = 25.4mm = 72pt = 6pc</p><h4 id="pc"><a href="#pc" class="headerlink" title="pc"></a>pc</h4><p>派卡(Pica), 相当于新四号铅字的尺寸</p><h4 id="in"><a href="#in" class="headerlink" title="in"></a>in</h4><p>英寸(Inch)</p><h4 id="mm"><a href="#mm" class="headerlink" title="mm"></a>mm</h4><p>毫米(Millimeter)</p><h4 id="cm"><a href="#cm" class="headerlink" title="cm"></a>cm</h4><p>厘米(Centimeter)</p><h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><p>px 是一个点, 不是自然界的长度单位, 可以画的很小也可以画的很大. 如果点很小, 那么画面就清晰, 我们称之为 “分辨率高”. 反之, 就是 “分辨率低”. 像素点的大小是会变的, 因此被称为相对长度单位.</p><p>pt 就是 point, 大小相当于 1/72 英寸. 他是一个符合自然界标准的长度单位, 也称为”绝对长度”</p><h2 id="new-操作符做了什么"><a href="#new-操作符做了什么" class="headerlink" title="new 操作符做了什么"></a>new 操作符做了什么</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span>(<span class="params">ctor, ...rest</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 创建空对象</span></span><br><span class="line">    <span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以新对象为上下文执行构造函数</span></span><br><span class="line">    ctor.call(obj, ...rest)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 绑定原型</span></span><br><span class="line">    obj.__proto__ = ctor.prototype</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回对象</span></span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="简述cookie-session记住登录状态机制原理"><a href="#简述cookie-session记住登录状态机制原理" class="headerlink" title="简述cookie/session记住登录状态机制原理"></a>简述cookie/session记住登录状态机制原理</h2><p>session 是服务端存放会话的大型保险柜<br>cookie 是下发给客户端的打开保险柜指定抽屉的钥匙</p><h2 id="网页中接收事件的顺序（事件流）有哪些？它们之间的区别是什么？"><a href="#网页中接收事件的顺序（事件流）有哪些？它们之间的区别是什么？" class="headerlink" title="网页中接收事件的顺序（事件流）有哪些？它们之间的区别是什么？"></a>网页中接收事件的顺序（事件流）有哪些？它们之间的区别是什么？</h2><ul><li>捕获事件流</li><li>冒泡事件流</li><li>DOM事件流 模型</li></ul><p>捕获: document -&gt; 触发元素<br>冒泡: 触发元素 -&gt; document</p><p>DOM 标准采用捕获 + 冒泡, 两种事件流都会触发 DOM 的所有对象. 从 document 对象开始, 也在 document 对象结束</p><p><img src="/note-images/2020-02-29-19-36-21.png" alt="2020-02-29-19-36-21"></p><p>DOM 标准规定事件流包括三个阶段:</p><ul><li>事件捕获阶段</li><li>处于目标阶段</li><li>事件冒泡阶段</li></ul><p>事件捕获阶段: 实际目标 <code>&lt;div&gt;</code> 在捕获阶段不会接收事件. 也就是在捕获阶段, 事件从 <code>document</code> 到 <code>&lt;html&gt;</code> 再到 <code>&lt;body&gt;</code> 就停止了<br>处于目标阶段: 事件在 <code>&lt;div&gt;</code> 上发生并处理. 但是事件处理会被看成是冒泡阶段的一部分<br>冒泡阶段: 事件又传播回文档</p><h2 id="css属性position都有哪些值"><a href="#css属性position都有哪些值" class="headerlink" title="css属性position都有哪些值"></a>css属性position都有哪些值</h2><ul><li>absolute 绝对定位</li><li>relative 相对定位</li><li>field 固定定位</li><li>static 默认值, 没有定位</li><li>inherit 继承父级定位方式</li><li>initial 设置该属性为默认值</li><li>sticky 黏性定位</li></ul><h2 id="简述你对HTTP控制访问（CORS）的理解"><a href="#简述你对HTTP控制访问（CORS）的理解" class="headerlink" title="简述你对HTTP控制访问（CORS）的理解"></a>简述你对HTTP控制访问（CORS）的理解</h2><p>我的理解在<a href="https://juejin.im/post/5c0a55e76fb9a049ef2665ba" target="_blank" rel="noopener">这里</a></p><p>参考文档:</p><ul><li><a href="https://www.cnblogs.com/starof/p/4066381.html" target="_blank" rel="noopener">javaScript事件（一）事件流</a></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/Tips/tips/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/Tips/tips/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">常用工具</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-02-26 10:10:31 / 修改时间：11:18:24" itemprop="dateCreated datePublished" datetime="2020-02-26T10:10:31+08:00">2020-02-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Tips/" itemprop="url" rel="index"><span itemprop="name">Tips</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>279</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>这里列举了我常用的效率工具, 免去了每次用的时候都需要百度一下的环节…</p></blockquote><h2 id="常用链接类-web-工具"><a href="#常用链接类-web-工具" class="headerlink" title="常用链接类(web 工具)"></a>常用链接类(web 工具)</h2><ul><li><a href="http://autoprefixer.github.io" target="_blank" rel="noopener">Autoprefixer CSS online</a></li><li><a href="http://webchart.ihuhai.cn/index.html" target="_blank" rel="noopener">时序图</a></li><li>js 压缩混淆代码智能恢复工具<a href="http://jsnice.org/" target="_blank" rel="noopener">jsnice</a></li><li>代码美化, 生成图片 <a href="https://carbon.now.sh/" target="_blank" rel="noopener">carbon</a></li><li>代码生成图片 <a href="https://codeimg.io/" target="_blank" rel="noopener">codeimg</a></li><li>ip 查询工具 <a href="https://www.ipip.net/ip.html" target="_blank" rel="noopener">ip</a></li><li>通过 ip 反查域名工具 <a href="https://tools.ipip.net/ipdomain.php" target="_blank" rel="noopener">ipip</a></li><li>笔记工具<a href="https://mubu.com/" target="_blank" rel="noopener">幕布</a>可生成思维导图</li><li><a href="https://www.yunpanjingling.com/" target="_blank" rel="noopener">云盘精灵</a></li></ul><h2 id="常用-npm-包"><a href="#常用-npm-包" class="headerlink" title="常用 npm 包"></a>常用 npm 包</h2><ul><li>npm 代码包离线版 <a href="https://unpkg.com/" target="_blank" rel="noopener">unpkg</a></li><li>自动生成 changelog <a href="https://www.npmjs.com/package/conventional-changelog" target="_blank" rel="noopener">conventional-changelog</a></li><li>fs 增强工具 <a href="https://www.npmjs.com/package/fs-extra" target="_blank" rel="noopener">fs-extra</a></li><li>压缩工具 <a href="https://www.npmjs.com/package/compression" target="_blank" rel="noopener">compression</a></li></ul><h2 id="那些带我飞的博客"><a href="#那些带我飞的博客" class="headerlink" title="那些带我飞的博客"></a>那些带我飞的博客</h2><ul><li><a href="https://juejin.im/post/59097cd7a22b9d0065fb61d2" target="_blank" rel="noopener">手摸手，带你用vue撸后台</a></li><li><a href="https://github.com/mqyqingfeng/Blog" target="_blank" rel="noopener">冴羽的博客</a></li><li><a href="https://github.com/justjavac/the-front-end-knowledge-you-may-not-know" target="_blank" rel="noopener">你可能不知道的前端知识点</a></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://note.niubishanshan.top/JavaScript/webpack%20%E5%AE%9E%E6%88%98/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpeg"><meta itemprop="name" content="圈圈的圈"><meta itemprop="description" content="技术学习, 读书笔记, 生活感悟~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="圈圈的随手笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> <a href="/JavaScript/webpack%20%E5%AE%9E%E6%88%98/%E6%A8%A1%E5%9D%97%E6%89%93%E5%8C%85/" class="post-title-link" itemprop="url">模块打包</a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-02-25 17:10:31" itemprop="dateCreated datePublished" datetime="2020-02-25T17:10:31+08:00">2020-02-25</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-02-28 13:16:08" itemprop="dateModified" datetime="2020-02-28T13:16:08+08:00">2020-02-28</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>8.8k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>8 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p><a href="https://item.jd.com/12623590.html" target="_blank" rel="noopener">webpack 实战</a> 第二章学习笔记</p></blockquote><h2 id="模块的概念"><a href="#模块的概念" class="headerlink" title="模块的概念"></a>模块的概念</h2><p>模块相之于程序, 就如同细胞之于生物体, 是具有特定功能的组成单元. 不同的模块负责不同的工作. 他们以某种方式联系在一起, 共同保证了程序的正常工作.</p><h2 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>CommonJS 是由 JavaScript 社区于 2009 年提出的包含模块 文件 控制台在内的一系列标准.</p><p>CommonJS 最初只为了服务端而设计, 直到有了 browserify 可以将 CommonJS 模块打包为浏览器可以运行的单个文件. 意味着客户端也可以遵循 CommonJS 标准来编写模块代码了</p><h3 id="对比直接插入-script-标签"><a href="#对比直接插入-script-标签" class="headerlink" title="对比直接插入 script 标签"></a>对比直接插入 script 标签</h3><p>CommonJS 中规定每个文件就是一个模块, 他与直接使用 script 标签将 js 文件引入的区别主要是, 直接引入的方式 js 文件的顶级作用域是全局作用域 在进行变量及函数声明时会污染全局环境, 后者则会形成一个属于模块自身的作用域, 模块内的函数和变量只有模块内部可以访问, 对外是不可见的</p><p>例如:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// calculator.js</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'calculator.js'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'index.js'</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./calculator.js'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(name) <span class="comment">// index.js</span></span><br></pre></td></tr></table></figure><p>上述代码会输出 <code>index.js</code> 说明了 <code>calculator.js</code> 中的变量声明不会影响 <code>index.js</code>, 每个模块都是有自己的作用域的.</p><h3 id="导出"><a href="#导出" class="headerlink" title="导出"></a>导出</h3><p>由于模块外部不能访问到模块内的内容所以模块想要像外界暴露自身的唯一方式就是导出, CommonJS 中通过 module.exports 向外暴露内容.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    name: <span class="string">'calculator.js'</span>,</span><br><span class="line">    add(a, b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>CommonJS 内部使用 module 对象用于存放当前模块的信息, 可以理解为模块最开始定义了一下变量</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = &#123;&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;&#125;</span><br></pre></td></tr></table></figure><p>其中 <code>module.exports</code> 定义了模块向外部导出的内容, 为了书写的方便. CommonJS 提供了以下简写方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">exports.name = <span class="string">'calculator.js'</span></span><br><span class="line">exports.add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上代码和 <code>module.exports</code> 导出方式在实现效果上没有任何的区别, 其中的机制是将 <code>exports</code> 指向了 <code>module.exports</code>, 而 <code>module.exports</code> 初始化时指向了一个空对象. 可以理解为 CommonJS 默认在每个模块的首部添加了以下代码.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = &#123;</span><br><span class="line">    exports: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> exports = <span class="built_in">module</span>.exports</span><br></pre></td></tr></table></figure><p>所以 <code>exports.add</code> 相当于给 <code>module.exports</code> 添加了一个属性</p><p>PS: 使用 <code>exports</code> 时需要注意, 不能直接给 <code>exports</code> 否则会使其失效</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">exports = &#123;</span><br><span class="line">    name: <span class="string">'calculator.js'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时, 只是修改了 <code>exports</code> 的值, 但是 <code>module.exports</code> 却仍然指向原来的对象, 因此 <code>name</code> 属性不会被导出</p><p>还有一个常见的错位用法是将 <code>exports</code> 和 <code>module.exports</code> 混用.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">exports.add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">modules.exports = &#123;</span><br><span class="line">    name: <span class="string">'calculator.js'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述代码中, 首先用 <code>exports</code> 导出了 add 属性, 然后将 <code>module.exports</code> 重新赋值为另外一个对象. 这会导致原本拥有的 add 属性丢失掉了, 最终只有 name 成功导出.</p><p>还要注意, 导出语句不代表模块的末尾, 在 <code>module.exports</code> 或 <code>exports</code> 后边的代码也是会执行的, 比如下面的代码会成功打印出 end</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    name: <span class="string">'calculator.js'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>)</span><br></pre></td></tr></table></figure><h3 id="导入-require"><a href="#导入-require" class="headerlink" title="导入 require"></a>导入 require</h3><p>在 CommonJS 中需要使用 require 导入模块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// calculator.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    add: <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> calculator = <span class="built_in">require</span>(<span class="string">'./calculator.js'</span>)</span><br><span class="line"><span class="keyword">const</span> sum = calculator.add(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sum) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>上述示例中, 在 <code>index.js</code> 中到入了 calculator 还使用了它的 add 方法</p><h4 id="导入一个模块的两种情况"><a href="#导入一个模块的两种情况" class="headerlink" title="导入一个模块的两种情况"></a>导入一个模块的两种情况</h4><ul><li>require 的模块是第一次被加载, 这时会首先执行该模块, 然后导出内容</li><li>require 的模块曾被加载过, 这时该模块的代码不会再次执行, 而是直接导出上次加载时执行的结果</li></ul><h4 id="不需要获取导出内容的导入"><a href="#不需要获取导出内容的导入" class="headerlink" title="不需要获取导出内容的导入"></a>不需要获取导出内容的导入</h4><p>如果需要加载一个模块但是不需要获取其导出的内容, 只是想要通过执行它而产生某种作用(比如 polyfill) 此时只需要执行 require 语句, 无需赋值操作</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'babel-polyfill'</span>)</span><br></pre></td></tr></table></figure><h4 id="动态加载路径"><a href="#动态加载路径" class="headerlink" title="动态加载路径"></a>动态加载路径</h4><p>require 还支持接收表达式模块路径. 因此, 我们可以动态地指定模块加载的路径</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleNames = [<span class="string">'foo.js'</span>, <span class="string">'bar.js'</span>]</span><br><span class="line">moduleNames.forEach(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">`./<span class="subst">$&#123;name&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="ES6-Module"><a href="#ES6-Module" class="headerlink" title="ES6 Module"></a>ES6 Module</h2><h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3><p>2015 年 6 月, 由 TC39 标准 委员会正式发布了 ES6, JavaScript 才拥有了模块化的能力</p><h3 id="语法示例"><a href="#语法示例" class="headerlink" title="语法示例"></a>语法示例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// calculator.js</span></span><br><span class="line">exports <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">'calculator.js'</span>,</span><br><span class="line">    add: <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> calculator <span class="keyword">from</span> <span class="string">'./calculator.js'</span></span><br><span class="line"><span class="keyword">const</span> sum = calculator.add(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sum) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><h3 id="和-CommonJS-的异同"><a href="#和-CommonJS-的异同" class="headerlink" title="和 CommonJS 的异同"></a>和 CommonJS 的异同</h3><p>相同点:</p><ul><li>ES Module 也是把每个文件都当做一个模块, 每个模块拥有自身的作用域</li></ul><p>不同点:</p><ul><li>和 CommonJS 不同的地方是导入和导出的语句</li><li><code>import</code> 和 <code>export</code> 也在 ES6 确认为保留关键字(CommonJS 中的 module 不属于保留关键字)</li><li>ES6 Module 会自动采用严格模式, 这在 ES5(CommonJS) 中是一个可选项.</li></ul><h3 id="导出-1"><a href="#导出-1" class="headerlink" title="导出"></a>导出</h3><ul><li>命名导出</li><li>默认导出</li></ul><h4 id="命名导出"><a href="#命名导出" class="headerlink" title="命名导出"></a>命名导出</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写法 1</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">'calculator'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法 2</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">'calculator'</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line"><span class="keyword">export</span> &#123;name, add&#125;</span><br></pre></td></tr></table></figure><p>使用命名导出时还可以使用 as 进行重命名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">'calculator'</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line"><span class="keyword">export</span> &#123;name, add <span class="keyword">as</span> getSum&#125;</span><br></pre></td></tr></table></figure><h4 id="默认导出"><a href="#默认导出" class="headerlink" title="默认导出"></a>默认导出</h4><p>对于默认输出可以理解为对外输出了一个名为 <code>default</code> 的变量, 因此不需要像命名导出一样进行变量声明, 直接导出即可</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">'calculator'</span>,</span><br><span class="line">    add: <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h3><p>ES6 Module 中使用 import 导入模块, 导入的内容定义的变量是只读的, 不能进行修改.</p><ul><li>导入带有命名导出的模块</li><li>导入默认导出的模块</li><li>导入两种导出模式混用的模块</li></ul><h4 id="导入带有命名导出的模块"><a href="#导入带有命名导出的模块" class="headerlink" title="导入带有命名导出的模块"></a>导入带有命名导出的模块</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// calculator.js</span></span><br><span class="line">exports <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">'calculator.js'</span>,</span><br><span class="line">    add: <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;name, add&#125; <span class="keyword">from</span> <span class="string">'./calculator.js'</span></span><br><span class="line"><span class="keyword">const</span> sum = add(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sum) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>与命名导出类似, 可以通过 as 关键字对导入的变量重新命名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name, add <span class="keyword">as</span> getSum&#125; <span class="keyword">from</span> <span class="string">'./calculator.js'</span></span><br><span class="line"><span class="keyword">const</span> sum = getSum(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sum) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>在导入多个变量时还可以采用整体导入的方式, 使用整体导入的方式把所有导入的值作为属性值添加给导入变量, 能够减少模块导入对当前模块的命名空间的影响.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> calculator <span class="keyword">from</span> <span class="string">'./calculator.js'</span></span><br><span class="line"><span class="keyword">const</span> sum = calculator.add(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sum) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><h4 id="导入默认导出的模块"><a href="#导入默认导出的模块" class="headerlink" title="导入默认导出的模块"></a>导入默认导出的模块</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// calculator.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">'calculator'</span>,</span><br><span class="line">    add: <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> calculator <span class="keyword">from</span> <span class="string">'./calculator.js'</span></span><br><span class="line">calculator(<span class="number">2</span>, <span class="number">3</span>) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>对于默认导出的模块, import 后边直接跟变量名, 并且这个变量名可以自由指定. 用于指代 calculator.js 导出的值, 原理如下:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> calculator&#125; <span class="keyword">from</span> <span class="string">'./calculator.js'</span></span><br></pre></td></tr></table></figure><h4 id="导入两种导出模式混用的模块"><a href="#导入两种导出模式混用的模块" class="headerlink" title="导入两种导出模式混用的模块"></a>导入两种导出模式混用的模块</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br></pre></td></tr></table></figure><p>以上 demo 中 React 是 react 模块的默认导出, Component 则是命名导出的一个变量</p><p>PS: 这里的 React 一定要写在 大括号的左边, 否则会报语法错误…</p><h3 id="复合导出和导入"><a href="#复合导出和导入" class="headerlink" title="复合导出和导入"></a>复合导出和导入</h3><p>在实际项目中, 经常需要把某一个模块导入以后立即导出(组件入口), 此时可以使用复合模式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;name, add&#125; <span class="keyword">from</span> <span class="string">'./calculator.js'</span></span><br></pre></td></tr></table></figure><p>复合写法, 目前只支持被导入模块通过命名导出的方式导出的变量, 默认导出则没有对应的复合语法, 需要分为两步.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calculator <span class="keyword">from</span> <span class="string">'./calculator.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> calculator</span><br></pre></td></tr></table></figure><h2 id="CommonJS-和-ES6-Module-的区别"><a href="#CommonJS-和-ES6-Module-的区别" class="headerlink" title="CommonJS 和 ES6 Module 的区别"></a>CommonJS 和 ES6 Module 的区别</h2><ul><li>动态与静态</li><li>值拷贝和动态映射</li><li>循环依赖</li></ul><h3 id="动态与静态"><a href="#动态与静态" class="headerlink" title="动态与静态"></a>动态与静态</h3><p>CommonJS 对模块依赖的解决是<strong>动态</strong>的, 而 ES6 Module 是<strong>静态</strong>的. 其中, 动态表示模块依赖关系的建立发生在代码的<strong>运行阶段</strong>, 而静态则表示模块依赖关系的建立发生在代码的<strong>编译阶段</strong>.</p><p>首先看一个 CommonJS 的例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;<span class="attr">name</span>: <span class="string">'b'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="built_in">require</span>(<span class="string">'./b.js'</span>).name</span><br></pre></td></tr></table></figure><p>模块 a 加载模块 b 时, 会先执行 b 中的代码, 并将其 <code>module.exports</code> 作为 require 的返回值. 并且 require 模块的路径可以动态指定, 支持传入一个表达式. 甚至可以通过 if 语句判断是否加载某个模块. 故, 代码执行前不能明确代码之间的依赖关系, 模块的导入导出发生在代码的运行阶段.</p><p>再看一个 ES6 Module 的例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">'b'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;name&#125; <span class="keyword">from</span> <span class="string">'./b.js'</span></span><br></pre></td></tr></table></figure><p>ES6 Module 的导入和导出语句都是声明式的, 不能够支持路径是一个表达式. 并且导入和导出语句必须在模块的顶层作用域(不能在 if 语句中). 故, ES6 Module 是一种静态的模块结构, 在 ES6 代码的编译阶段就能分析出模块的依赖关系.</p><p>相对于 CommonJS 动态导入类型优势</p><ul><li>死代码检测和排除</li><li>可实现模块变量类型检查</li><li>编译器优化, 在 CommonJS 等动态模块化系统中, 无论采用哪种方式, 本质上导入的都是一个对象. 而 es6 支持直接导入变量, 减少了引用的层级. 程序效率更高</li></ul><h3 id="值拷贝和动态映射"><a href="#值拷贝和动态映射" class="headerlink" title="值拷贝和动态映射"></a>值拷贝和动态映射</h3><p>导入一个模块时, CommonJS 方案获取的是一份导出<strong>值的拷贝</strong>, 而在 ES6 Module 中获得的则是<strong>值的动态映射</strong>且这个映射是只读的.</p><p>首先看一个 CommonJS 的例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foo.js</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    count,</span><br><span class="line">    add(a, b) &#123;</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bar.js</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="built_in">require</span>(<span class="string">'./foo.js'</span>).count</span><br><span class="line"><span class="keyword">var</span> add = <span class="built_in">require</span>(<span class="string">'./foo.js'</span>).add</span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 0 这里的 count 是对 foo.js 中的 count 值的拷贝</span></span><br><span class="line">add(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 0 foo.js 中的 count 的变化不会改变导入的 count 的值</span></span><br><span class="line">count += <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 1 导入的 count 变量, 也就是拷贝的值可以更改</span></span><br></pre></td></tr></table></figure><p><code>bar.js</code> 中的 count 是对 <code>foo.js</code> 中的 count 值的一份值拷贝, 因此在调用 add 函数时, 虽然改变了 <code>foo.js</code> 中的 count 的值但是并没有对 bar 中导入是创建的副本造成影响. 同时, 在 CommonJS 中允许我们对导入的值进行修改. 可以修改 <code>bar.js</code> 中导入的 count 的值, 当然由于是值的拷贝, 这些操作也不会影响到 <code>bar.js</code> 本身.</p><p>其次, 看一个 ES6 Module 的例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foo.js</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;count, add&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bar.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;count, add&#125; <span class="keyword">from</span> <span class="string">'./foo.js'</span></span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 0 这里的 count 是对 foo.js 中的 count 值的映射</span></span><br><span class="line">add(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 1 实时反映 foo.js 中的 count 值的变化</span></span><br><span class="line">count += <span class="number">1</span> <span class="comment">// 不可更改, 抛出 SyntaxError</span></span><br></pre></td></tr></table></figure><p>ES6 Module 中导入的变量, 其实就是对原有值的<strong>动态映射</strong> <code>bar.js</code> 中导入的 count 就是 <code>foo.js</code> 中的 count 变量值的<strong>实时反映</strong>, 通过使用 add 方法修改了 <code>foo.js</code> 中的 count 变量, <code>bar.js</code> 中导入的 count 变量值也随之变化.</p><h3 id="循环依赖代码示例"><a href="#循环依赖代码示例" class="headerlink" title="循环依赖代码示例"></a>循环依赖<a href="https://github.com/luoquanquan/learn-fe/tree/master/webpack-learn/webpack-in-action/circular-reference" target="_blank" rel="noopener">代码示例</a></h3><p>循环依赖指的是 a 依赖 b, 同时 b 又依赖 a, 比如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foo.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;bar&#125; <span class="keyword">from</span> <span class="string">'./bar.js'</span></span><br><span class="line">bar()</span><br><span class="line"></span><br><span class="line"><span class="comment">// bar.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;foo&#125; <span class="keyword">from</span> <span class="string">'./foo.js'</span></span><br><span class="line">foo()</span><br></pre></td></tr></table></figure><p>工程项目中应该避免循环依赖的产生, 但是实际项目复杂度上升的时候容易出现隐藏的循环依赖关系…</p><p>首先看一个 CommonJS 的例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foo.js</span></span><br><span class="line"><span class="keyword">const</span> bar = <span class="built_in">require</span>(<span class="string">'./bar.js'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'value of bar: '</span>, bar)</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="string">'this is foo.js'</span></span><br><span class="line"><span class="comment">// bar.js</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="built_in">require</span>(<span class="string">'./foo.js'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'value of foo: '</span>, foo)</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="string">'this is bar.js'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./foo.js'</span>)</span><br></pre></td></tr></table></figure><p>上例中, <code>index.js</code> 是程序执行的入口. 它加载了 <code>foo.js</code> 然而 <code>foo.js</code> 和 <code>bar.js</code> 存在循环依赖关系, 理想情况下, 两个模块都能正常执行控制台输出以下内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">value of foo: this is foo.js</span><br><span class="line">value of bar: this is bar.js</span><br></pre></td></tr></table></figure><p>然而实际是:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">value of foo:  &#123;&#125;</span><br><span class="line">value of bar:  this is bar.js</span><br></pre></td></tr></table></figure><p>上述代码的执行过程为:</p><ol><li><code>index.js</code> 导入了 <code>foo.js</code>, 此时开始执行 <code>foo.js</code> 中的代码</li><li><code>foo.js</code> 第一行导入了 <code>bar.js</code>, 这时 <code>foo.js</code> 不会继续向下执行, 而是进入 <code>bar.js</code> 内部</li><li>在 <code>bar.js</code> 中又对 <code>foo.js</code> 进行了导入, 产生循环依赖.</li><li>然而此时由于 <code>foo.js</code> 已经被导入过一次, 执行权不会再次给到 <code>foo.js</code> 而是直接取其导出值, 也就是 <code>module.exports</code> 但是 <code>foo.js</code> 还没有执行完毕导出值此时为默认的空对象, 所以 <code>bar.js</code> 中的打印语句打印的结果是 <code>value of foo: {}</code></li><li><code>bar.js</code> 执行完毕, 执行权交回 <code>foo.js</code>, 在 <code>foo.js</code> 中继续向下执行, 在控制台中打印出 <code>value of bar: this is bar.js</code> 整个流程结束</li></ol><p>通过以上流程可知, CommonJS 中遇到循环依赖, 虽然模块都会执行, 但是并不能获取到我们想要的结果. 通过 webpack 生成代码的这一段可以理解以上第四步的内容, 当然也可以在 nodejs 模块的 require 函数前打点, 进入函数内部研究一把. 道理是一样的,</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__webpack_require__</span>(<span class="params">moduleId</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Check if module is in cache</span></span><br><span class="line">	<span class="keyword">if</span>(installedModules[moduleId]) &#123;</span><br><span class="line">		<span class="keyword">return</span> installedModules[moduleId].exports;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// Create a new module (and put it into the cache)</span></span><br><span class="line">	<span class="keyword">var</span> <span class="built_in">module</span> = installedModules[moduleId] = &#123;</span><br><span class="line">		i: moduleId,</span><br><span class="line">		l: <span class="literal">false</span>,</span><br><span class="line">		exports: &#123;&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Execute the module function</span></span><br><span class="line">	modules[moduleId].call(<span class="built_in">module</span>.exports, <span class="built_in">module</span>, <span class="built_in">module</span>.exports, __webpack_require__);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Flag the module as loaded</span></span><br><span class="line">	<span class="built_in">module</span>.l = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Return the exports of the module</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">module</span>.exports;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其次, 看一个 ES6 Module 循环依赖的例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foo.js</span></span><br><span class="line"><span class="keyword">import</span> bar <span class="keyword">from</span> <span class="string">'./bar'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'value of bar: '</span>, bar)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">'this is foo.js'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bar.js</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">'./foo'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'value of foo: '</span>, foo)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">'this is bar.js'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./foo.js'</span></span><br></pre></td></tr></table></figure><p>由于 node 不能支持 <code>ES6 Module</code>, 所以需要使用 parcel 做一下打包处理, 详细代码在<a href="https://github.com/luoquanquan/learn-fe/tree/master/webpack-learn/webpack-in-action/circular-reference/es6-module" target="_blank" rel="noopener">这里</a></p><p>输出的结果为:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">value of foo:  undefined</span><br><span class="line">foo.js:2 value of bar:  this is bar.js</span><br></pre></td></tr></table></figure><p><code>ES6 Module</code> 中也不能得到预想的值, 但是和 <code>CommonJS</code> 有区别, 在于 <code>CommonJS</code> 循环依赖得到的是一个空对象而 <code>ES6 Module</code> 得到的是 undefined.</p><p>利用 <code>ES6 Module</code> 获取到的值是模块的动态映射的特性使其支持循环依赖</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foo.js</span></span><br><span class="line"><span class="keyword">import</span> bar <span class="keyword">from</span> <span class="string">'./bar'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">invoker</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(invoker, <span class="string">' invokes foo.js'</span>)</span><br><span class="line">    bar(<span class="string">'foo.js'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> foo</span><br><span class="line"></span><br><span class="line"><span class="comment">// bar.js</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">'./foo'</span></span><br><span class="line"><span class="keyword">let</span> invoked = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">invoker</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!invoked) &#123;</span><br><span class="line">        invoked = <span class="literal">true</span></span><br><span class="line">        <span class="built_in">console</span>.log(invoker, <span class="string">' invokes bar.js'</span>)</span><br><span class="line">        foo(<span class="string">'bar.js'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> bar</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">'./foo.js'</span></span><br><span class="line">foo(<span class="string">'index.js'</span>)</span><br></pre></td></tr></table></figure><p>以上代码运行的结果为:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">index.js  invokes foo.js</span><br><span class="line">bar.js:7 foo.js  invokes bar.js</span><br><span class="line">foo.js:3 bar.js  invokes foo.js</span><br></pre></td></tr></table></figure><p>综上, <code>foo.js</code> 和 <code>bar.js</code> 两个模块均获取了正确的导出值, 代码执行的过程为.</p><ol><li><code>index.js</code> 作为入口导入 <code>foo.js</code>, 开始执行 <code>foo.js</code> 中的代码</li><li><code>foo.js</code> 中导入了 <code>bar.js</code> 执行权交给 <code>bar.js</code></li><li>在 <code>bar.js</code> 中一直执行到其结束, 完成 bar 函数的定义, 此时 <code>foo.js</code> 还没有执行完, 所以 foo 还是 undefined</li><li>执行权回到 <code>foo.js</code> 继续执行直到结束, 完成 foo 函数的定义, 由于 <code>ES6 Module</code> 的动态特性, 此时 <code>bar.js</code> 中的 foo 变量也已经有值. 这是两中模块加载方式的本质区别</li><li>执行权回到 <code>index.js</code> 并执行 foo 函数, 此时依次执行 <code>foo -&gt; bar -&gt; foo</code>, 并在控制台打印出预想的值</li></ol></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"> <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="圈圈的圈" src="/images/avatar.jpeg"><p class="site-author-name" itemprop="name">圈圈的圈</p><div class="site-description" itemprop="description">技术学习, 读书笔记, 生活感悟~</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">38</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">7</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">22</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://juejin.im/user/5837c2bd61ff4b006ca8d1b2" title="掘金 → https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;5837c2bd61ff4b006ca8d1b2" rel="noopener" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i> 掘金</a></span><span class="links-of-author-item"><a href="https://github.com/luoquanquan" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;luoquanquan" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:luo_quanquan@163.com" title="E-Mail → mailto:luo_quanquan@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i> RSS</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">圈圈的圈</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span title="站点总字数">48k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span title="站点阅读时长">44 分钟</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/js/theme-next-canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script></body></html>